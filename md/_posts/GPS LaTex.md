$$
\sqrt{(x_1-x)^2 + (y_1-y)^2 + (z_1-z)^2} = c(t - t_{01}) = d_1
$$

$$
\sqrt{(x_2-x)^2 + (y_2-y)^2 + (z_2-z)^2} = c(t - t_{02}) = d_2
$$

$$
\sqrt{(x_3-x)^2 + (y_3-y)^2 + (z_3-z)^2} = c(t - t_{03}) = d_3
$$

$$
\sqrt{(x_4-x)^2 + (y_4-y)^2 + (z_4-z)^2} = c(t - t_{04}) = d_4
$$



````html
<div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

				<p>本文介绍GPS定位技术。</p>

<!--more-->

<p><strong>目录</strong></p>
<ul id="markdown-toc">
  <li><a href="#概述" id="markdown-toc-概述">概述</a></li>
  <li><a href="#原理" id="markdown-toc-原理">原理</a></li>
  <li><a href="#坐标系" id="markdown-toc-坐标系">坐标系</a></li>
  <li><a href="#地图投影" id="markdown-toc-地图投影">地图投影</a>    <ul>
      <li><a href="#墨卡托投影mercator-projection" id="markdown-toc-墨卡托投影mercator-projection">墨卡托投影(Mercator Projection)</a></li>
      <li><a href="#高斯-克吕格投影" id="markdown-toc-高斯-克吕格投影">高斯-克吕格投影</a></li>
      <li><a href="#utm投影" id="markdown-toc-utm投影">UTM投影</a></li>
      <li><a href="#兰勃特投影" id="markdown-toc-兰勃特投影">兰勃特投影</a></li>
    </ul>
  </li>
  <li><a href="#时间系统" id="markdown-toc-时间系统">时间系统</a>    <ul>
      <li><a href="#国际原子时tai" id="markdown-toc-国际原子时tai">国际原子时(TAI)</a></li>
      <li><a href="#协调世界时utc" id="markdown-toc-协调世界时utc">协调世界时(UTC)</a></li>
      <li><a href="#gps时" id="markdown-toc-gps时">GPS时</a></li>
      <li><a href="#卫星时" id="markdown-toc-卫星时">卫星时</a></li>
      <li><a href="#地方时" id="markdown-toc-地方时">地方时</a></li>
    </ul>
  </li>
  <li><a href="#位置计算方法" id="markdown-toc-位置计算方法">位置计算方法</a></li>
  <li><a href="#gps系统" id="markdown-toc-gps系统">GPS系统</a>    <ul>
      <li><a href="#全系统描述" id="markdown-toc-全系统描述">全系统描述</a></li>
      <li><a href="#空间部分" id="markdown-toc-空间部分">空间部分</a></li>
      <li><a href="#扩频和cdma" id="markdown-toc-扩频和cdma">扩频和CDMA</a></li>
      <li><a href="#控制部分" id="markdown-toc-控制部分">控制部分</a></li>
      <li><a href="#用户部分" id="markdown-toc-用户部分">用户部分</a></li>
      <li><a href="#gps导航电文" id="markdown-toc-gps导航电文">GPS导航电文</a>        <ul>
          <li><a href="#导航电文的结构" id="markdown-toc-导航电文的结构">导航电文的结构</a></li>
          <li><a href="#子帧包含的信息" id="markdown-toc-子帧包含的信息">子帧包含的信息</a></li>
          <li><a href="#遥测字tlm与转换字how" id="markdown-toc-遥测字tlm与转换字how">遥测字(TLM)与转换字(HOW)</a></li>
          <li><a href="#25页的细分" id="markdown-toc-25页的细分">25页的细分</a></li>
        </ul>
      </li>
      <li><a href="#gps现代化" id="markdown-toc-gps现代化">GPS现代化</a></li>
    </ul>
  </li>
  <li><a href="#计算gps卫星的位置" id="markdown-toc-计算gps卫星的位置">计算GPS卫星的位置</a></li>
  <li><a href="#计算行程时间" id="markdown-toc-计算行程时间">计算行程时间</a>    <ul>
      <li><a href="#确定行程时间的具体方法" id="markdown-toc-确定行程时间的具体方法">确定行程时间的具体方法</a></li>
    </ul>
  </li>
  <li><a href="#误差分析与精度因子" id="markdown-toc-误差分析与精度因子">误差分析与精度因子</a>    <ul>
      <li><a href="#误差主要原因" id="markdown-toc-误差主要原因">误差主要原因</a></li>
      <li><a href="#dop" id="markdown-toc-dop">DOP</a></li>
    </ul>
  </li>
  <li><a href="#减小误差" id="markdown-toc-减小误差">减小误差</a>    <ul>
      <li><a href="#gps误差的原因" id="markdown-toc-gps误差的原因">GPS误差的原因</a></li>
      <li><a href="#减小误差的方法" id="markdown-toc-减小误差的方法">减小误差的方法</a></li>
      <li><a href="#d-gps" id="markdown-toc-d-gps">D-GPS</a></li>
    </ul>
  </li>
  <li><a href="#a-gps" id="markdown-toc-a-gps">A-GPS</a></li>
  <li><a href="#参考文献" id="markdown-toc-参考文献">参考文献</a></li>
</ul>

<h2 id="概述">概述<a class="anchorjs-link " href="#概述" aria-label="Anchor link for: 概述" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>本节内容主要参考了[<a href="#r_1">1</a><a name="rb_1"></a>][<a href="#r_2">2</a><a name="rb_2"></a>][<a href="#r_3">3</a><a name="rb_3"></a>][<a href="#r_4">4</a><a name="rb_4"></a>]。</p>

<p>不管是无人驾驶还是V2X通信，感知车辆当前的位置都是一个最基本的要求。对于V2X应用来说，我们不但要知道车辆在哪条马路上，而且还需要更准确的知道在哪个车道上。因为美国90%的车道(lane)宽度大于3米，所以如果定位精度在1.5米之内就可以判断车辆在哪个车道上。最常见的定位信息来自于全球导航卫星系统(Global Navigation Satellite System, GNSS)。GNSS可以提供较精确的定位信息，但是通常还达不到1.5米的要求，而且在市内或者有建筑物遮挡卫星信号的时候误差更大。最常用的GNSS是美国的GPS(Global Positioning System)，此外还有欧洲的Galileo、俄罗斯的GLONASS和中国的北斗。当然目前最常用的还是美国的GPS，我们下面都以GPS为例来介绍。</p>

<p>卫星导航是一种通过全球导航卫星系统(GNSS)精确测定地球上任何一点的位置和时间的方法。目前，卫星导航接收机可供个人定位、商业定位、导航、勘测和测定精确时间之用，用作个人、休闲和商业方面的用途也日渐增多。使用GNSS可在地球表面上的任何一点精确测定以下数值，如果下图所示：</p>

<p><a name="img17"><img src="/img/itp/17.jpg" alt=""></a>
<em>图：卫星导航的基本功能 来自[<a href="#r_4">4</a>]</em></p>

<ul>
  <li>
    <p>精确位置(经度、纬度和高度坐标)，精度范围在20m到约1mm之间。</p>
  </li>
  <li>
    <p>精确时间(协调世界时，即UTC)，精度范围在60ns到约5ns之间。</p>
  </li>
</ul>

<p>可由上述数值推导出行程(路径)的速度和方向，这些数值由围绕地球运行的卫星提供。行程的速度也可通过多普勒频移测量直接确定。</p>

<p>GPS系统的全称为：授时与测距导航系统/全球定位系统(NAVSTAR-GPS)，设计为军民两用。我们通常认为GPS是用来定位的，但其实它还可以来进行时钟的准确同步，在后面的计算过程中会发现怎么用它来同步GPS接收器和UTC(GPS原子钟)的时间。GPS由由美国空军第50航空联队负责运营[<a href="#r_5">5</a><a name="rb_5"></a>]，最初目的是是军用，但是后来逐渐民用。我们现在用的手机或者各种导航设备都可能使用GPS，虽然没有直接给美国国防部授权费，但是(正规)GPS芯片生产商都已经交过授权费了。</p>

<h2 id="原理">原理<a class="anchorjs-link " href="#原理" aria-label="Anchor link for: 原理" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>GPS定位的原理是三边测量术(Trilateration)，一些资料误认为是三角测量(Triangulation)，这是不对的[<a href="#r_6">6</a><a name="rb_6"></a>]。GPS定位的原理如下图：</p>

<p><a name="img18"><img src="/img/itp/18.jpg" alt=""></a>
<em>图：卫星导航的基本功能 来自[<a href="#r_5">5</a>]</em></p>

<p>如果我们知道一个物体离三个已知位置的物体(卫星)的距离，那么我们就能计算出这个物体的位置。具体来说，我们通过这三个卫星画三个球，那么这三个球必定相交于空间里的一个点。如果读者和我一样没有空间想象力，那么可以看公式：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax MathJax_FullWidth" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mn>1</mn></msub><mo>=</mo><msqrt><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>&amp;#x2212;</mo><msub><mi>x</mi><mn>1</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>y</mi><mo>&amp;#x2212;</mo><msub><mi>y</mi><mn>1</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>z</mi><mo>&amp;#x2212;</mo><msub><mi>z</mi><mn>1</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></msqrt><mspace linebreak=&quot;newline&quot; /><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mn>2</mn></msub><mo>=</mo><msqrt><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>&amp;#x2212;</mo><msub><mi>x</mi><mn>2</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>y</mi><mo>&amp;#x2212;</mo><msub><mi>y</mi><mn>2</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>z</mi><mo>&amp;#x2212;</mo><msub><mi>z</mi><mn>2</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></msqrt><mspace linebreak=&quot;newline&quot; /><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mn>3</mn></msub><mo>=</mo><msqrt><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>&amp;#x2212;</mo><msub><mi>x</mi><mn>3</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>y</mi><mo>&amp;#x2212;</mo><msub><mi>y</mi><mn>3</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>z</mi><mo>&amp;#x2212;</mo><msub><mi>z</mi><mn>3</mn></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></msqrt><mspace linebreak=&quot;newline&quot; /></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 100%; display: inline-block; min-width: 22.086em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(6.513em, 1018.39em, 13.701em, -999.997em); top: -7.862em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-2"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(2.659em, 1018.39em, 4.794em, -999.997em); top: -4.008em; left: 50%; margin-left: -9.216em;"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math-italic;">s</span><span class="msubsup" id="MathJax-Span-6"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-8" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-9" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="msqrt" id="MathJax-Span-10" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 14.951em; height: 0px;"><span style="position: absolute; clip: rect(2.971em, 1013.96em, 4.43em, -999.997em); top: -4.008em; left: 0.992em;"><span class="mrow" id="MathJax-Span-11"><span class="mo" id="MathJax-Span-12" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-14" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-15" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="mn" id="MathJax-Span-17" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-18"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-20" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-24" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-25" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-27" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-28"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-29" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-30" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-31" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-32" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-34" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-35" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-37" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-38"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-39" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-40" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.596em, 1013.91em, 3.961em, -999.997em); top: -4.893em; left: 0.992em;"><span style="display: inline-block; position: relative; width: 13.909em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: -0.102em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: 13.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 1.565em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.805em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.898em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.284em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.857em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.951em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.19em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.711em, 1001.04em, 4.794em, -999.997em); top: -4.06em; left: 0em;"><span style="font-family: MathJax_Size2;">√</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.659em, 1018.39em, 4.794em, -999.997em); top: -1.768em; left: 50%; margin-left: -9.216em;"><span class="mspace" id="MathJax-Span-41" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-42" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-43" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math-italic;">s</span><span class="msubsup" id="MathJax-Span-45"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-47" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-48" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="msqrt" id="MathJax-Span-49" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 14.951em; height: 0px;"><span style="position: absolute; clip: rect(2.971em, 1013.96em, 4.43em, -999.997em); top: -4.008em; left: 0.992em;"><span class="mrow" id="MathJax-Span-50"><span class="mo" id="MathJax-Span-51" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-54" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="mn" id="MathJax-Span-56" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-57"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-58" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-59" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-60" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-61" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-64" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-66" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-67"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-68" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-69" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-71" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-74" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-76" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-77"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-78" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-79" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.596em, 1013.91em, 3.961em, -999.997em); top: -4.893em; left: 0.992em;"><span style="display: inline-block; position: relative; width: 13.909em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: -0.102em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: 13.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 1.565em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.805em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.898em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.284em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.857em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.951em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.19em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.711em, 1001.04em, 4.794em, -999.997em); top: -4.06em; left: 0em;"><span style="font-family: MathJax_Size2;">√</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.659em, 1018.39em, 4.794em, -999.997em); top: 0.471em; left: 50%; margin-left: -9.216em;"><span class="mspace" id="MathJax-Span-80" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-81" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Math-italic;">s</span><span class="msubsup" id="MathJax-Span-84"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-86" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-87" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="msqrt" id="MathJax-Span-88" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 14.951em; height: 0px;"><span style="position: absolute; clip: rect(2.971em, 1013.96em, 4.43em, -999.997em); top: -4.008em; left: 0.992em;"><span class="mrow" id="MathJax-Span-89"><span class="mo" id="MathJax-Span-90" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-92" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-93" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-94" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="mn" id="MathJax-Span-95" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-96"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-97" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-98" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-99" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-100" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="mi" id="MathJax-Span-101" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-102" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-103" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-104" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-105" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-106"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-107" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-108" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-109" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-110" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-112" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-113" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-114" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-115" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-116"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-117" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-118" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.596em, 1013.91em, 3.961em, -999.997em); top: -4.893em; left: 0.992em;"><span style="display: inline-block; position: relative; width: 13.909em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: -0.102em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: 13.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 1.565em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.805em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.898em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.284em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.857em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.951em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.19em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.711em, 1001.04em, 4.794em, -999.997em); top: -4.06em; left: 0em;"><span style="font-family: MathJax_Size2;">√</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.857em, 1000em, 4.169em, -999.997em); top: 1.669em; left: 50%; margin-left: 0em;"><span class="mspace" id="MathJax-Span-119" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 7.867em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -6.872em; border-left: 0px solid; width: 0px; height: 8.378em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mn>1</mn></msub><mo>=</mo><msqrt><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mn>1</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mn>1</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>z</mi><mo>−</mo><msub><mi>z</mi><mn>1</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt><mspace linebreak="newline"></mspace><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mn>2</mn></msub><mo>=</mo><msqrt><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>z</mi><mo>−</mo><msub><mi>z</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt><mspace linebreak="newline"></mspace><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mn>3</mn></msub><mo>=</mo><msqrt><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><msub><mi>x</mi><mn>3</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mn>3</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>z</mi><mo>−</mo><msub><mi>z</mi><mn>3</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt><mspace linebreak="newline"></mspace></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">dist_1 = \sqrt{(x-x_1)^2+(y-y_1)^2+(z-z_1)^2} \\
dist_2 = \sqrt{(x-x_2)^2+(y-y_2)^2+(z-z_2)^2} \\
dist_3 = \sqrt{(x-x_3)^2+(y-y_3)^2+(z-z_3)^2} \\</script>

<p>其中x,y,z是要定位的物体的三维笛卡尔坐标，<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo>,</mo><msub><mi>z</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-120" style="width: 5.003em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.169em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1004.07em, 2.607em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-121"><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-123"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-124" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="mi" id="MathJax-Span-125" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-126" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-127" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-128" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-129" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-130" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-131" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-132" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-133" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-134" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo>,</mo><msub><mi>z</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">(x_i,y_i,z_i)</script>是第i个卫星的坐标，<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mi>i</mi></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-135" style="width: 2.398em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.982em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.98em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-136"><span class="mi" id="MathJax-Span-137" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-138" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-139" style="font-family: MathJax_Math-italic;">s</span><span class="msubsup" id="MathJax-Span-140"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-141" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-142" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi><mi>i</mi><mi>s</mi><msub><mi>t</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-3">dist_i</script>是物体到第i个卫星的距离。三个方程，三个未知数，那么应该可以求出唯一解(没证明过，但应该是这样的，而且好像没有解析解)。</p>

<p>卫星在每一个时刻的精确位置叫做星历，而粗略的位置叫年历，这些信息卫星会用广播的方式定期发送。因此GPS接收器可以通过收听这些广播获得没依靠卫星的精确位置，那现在的问题就是怎么确定每一个卫星到接收器的距离。如果我们能够让GPS接收器的时钟完全和GPS卫星同步，那么我们可以通过接受的信号和实际(通过星历)的信号的时延来得到电磁波从卫星到GPS接收器的行程时间，如果再假设电磁波的速度是固定光速<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mo>=</mo><mn>3</mn><mo>&amp;#x00D7;</mo><msup><mn>10</mn><mn>8</mn></msup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>s</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-143" style="width: 8.076em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.721em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.148em, 1006.67em, 2.607em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-144"><span class="mi" id="MathJax-Span-145" style="font-family: MathJax_Math-italic;">c</span><span class="mo" id="MathJax-Span-146" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mn" id="MathJax-Span-147" style="font-family: MathJax_Main; padding-left: 0.263em;">3</span><span class="mo" id="MathJax-Span-148" style="font-family: MathJax_Main; padding-left: 0.211em;">×</span><span class="msubsup" id="MathJax-Span-149" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.409em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.94em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mn" id="MathJax-Span-150" style="font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.992em;"><span class="mn" id="MathJax-Span-151" style="font-size: 70.7%; font-family: MathJax_Main;">8</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mi" id="MathJax-Span-152" style="font-family: MathJax_Math-italic;">m</span><span class="texatom" id="MathJax-Span-153"><span class="mrow" id="MathJax-Span-154"><span class="mo" id="MathJax-Span-155" style="font-family: MathJax_Main;">/</span></span></span><span class="mi" id="MathJax-Span-156" style="font-family: MathJax_Math-italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.441em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mo>=</mo><mn>3</mn><mo>×</mo><msup><mn>10</mn><mn>8</mn></msup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">c=3 \times 10^8m/s</script>，则可以计算出卫星到接收器的距离。</p>

<p>因为光速很快，即使1μs的时差也会带来300m的位置误差，但是我们不可能花费高额度代价个GPS接收器配备昂贵的原子钟。实际我们会把GPS接收器和GPS卫星的时差<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-157" style="width: 1.461em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.15em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-158"><span class="mi" id="MathJax-Span-159" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-160" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">\Delta t</script>也当成一个未知量，这个时候我们需要4个方程才能解出4个未知量，所以我们需要4颗GPS卫星的信号才能进行定位。</p>

<p><a name="img20"><img src="/img/itp/20.png" alt=""></a>
<em>图：计算伪距(pseudorange)</em></p>

<p>计算距离的方法如上图所示，通过星历，我们可以”生成”GPS卫星目前的信号，如图中3所示。而实际接受到的信号是图中1，通过相关的计算我们可以得到这两个信号的时移<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-161" style="width: 1.461em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.15em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-162"><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-164" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-6">\Delta t</script>，然后乘以光速c就得到伪距。为什么叫”伪”距呢？因为GPS接收器和卫星的时钟差异，这不是卫星到真实的距离，所以叫伪距。</p>

<h2 id="坐标系">坐标系<a class="anchorjs-link " href="#坐标系" aria-label="Anchor link for: 坐标系" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>前面我们在介绍GPS原理时使用的是三维的笛卡尔坐标系统，但是我们平时是在地球这个球体表面运动。在小的尺度上看可以认为是直线运动，但是在大一点的尺度看我们都是沿着球面进行曲线的运动，这个时候使用经度和维度这样的表示方法会更加简单。</p>

<p>我们都知道地球是圆的，往往把它想象成一个理想的球体。但实际上地球并不圆，而且形状经常改变，要界定它的边界都不容易。比如我们在北京建造一幢摩天大楼，则地球的形状就变了。甚至我们跺跺脚，地球都可能发生极其轻微的变形。另外地球周围的大气等是否也算作地球的一部分，这也不是那么能简单说的清楚的事情。但地球究竟有多圆？描述我们这个蓝色星球的外形一直是一项充满挑战的科学工作。数百年来，提出了若干个不同的模型以尽可能真实地表述地球的近似真实外形。</p>

<p>我们用(定义)地球体为这样的形体：平均海平面的零点即为其表面。该表面由地球重力所决定，因而其几何描述极其复杂。研究人员借用了希腊文中的地球一词，将该表面的几何外形称为大地水准面(Geoid)，由此得到的假想球体叫做地球体。</p>

<p><a name="img21"><img src="/img/itp/21.jpg" alt=""></a>
<em>图：大地水准面(Geoid)是地球表面的近似外形</em></p>

<p>大地水准面是一个非常接近海平面并且具有相同重力势能的表面，如果一个人能够挖掘一条切断陆地、连接起海洋的运河的话，那么这个运河的水面也就是大致的大地水准面。大地水准面是波动的，有的地区高些，有的地区低些，差别甚至可以达到1000公里距离相差100米(注：美国新墨西哥州的Carlsbad就是这样的)[<a href="#r_8">8</a><a name="rb_8"></a>]。为什么要定义这么一个不规则，无法用一个公式精确描述的”假想”模型呢？由于重力矢量(vector)总是垂直于大地水准面的，铅垂线(plumb lines)和水准仪(spirit levels)的工作会受到大地水准面的直接影响。所以我们在测量高度的时候使用测量地点的大地水准面作为基点是很方便的，比如我们盖一个房子，我们的地可能不平，那么怎么测量房子的高度呢？我们首先需要一个方向，而使用重力相反的方向显然是比较合适的。那这个方向(轴)的起点呢？显然使用海平面作为起点是比较合适的，这也是我们通常用海拔来描述一个地球表面物体的高度的原因。我国1987年规定将青岛验潮站1952年1月1日~1979年12月31日所测定的黄海平均海水面作为全国高程的起算面。并推测得青岛观象山上国家水准原点高程为72.260m。根据该高程起算面建立起来的高程系统，称为1985国家高程基准。我国各地面点的海拔，均指由黄海平均海平面起算的高度[<a href="#r_9">9</a><a name="rb_9"></a>]。</p>

<p><a name="img22"><img src="/img/itp/22.jpg" alt=""></a>
<em>图：水准仪： 来自百度百科</em></p>

<p>上图是水准仪，如果要测量两点的高度差(当然别太远了)，则分别在两点放置水准仪，水准仪会提供一条垂直于重力加速度方向的视线，然后利用水准尺读取两点的高程差。那么我首先测量离高程基准近的点A，得到A的高程，然后再测A附近的B和A的差距得到B的高程。但是前面也提到大地水准面是不规则的，不同高程的水准面(重力势能相等的面)是不平行的，所以沿不同路线测得的两点间高差将有差异。比如我不测A，而是测附近的A’，然后再测A’和B的高程差，这样两种方法得到的B的高程可能是不同的。</p>

<p>在进行计算时，Geoid是难以处理的形体。因此在进行日常的测量工作时需要一种简单、便于定义的外形。这种用作替代的表面就是椭球。如果一个椭圆的表面绕其对称的南北极轴线旋转，就会得到一个椭球体。</p>

<p><a name="img23"><img src="/img/itp/23.jpg" alt=""></a>
<em>图：椭球体</em></p>

<p>椭球由两个参数确定：长半轴a(位于赤道面)；短半轴b(位于南北极轴)。椭球与理想球体的外形偏差成为扁率(f)：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>f</mi><mo>=</mo><mfrac><mrow><mi>a</mi><mo>&amp;#x2212;</mo><mi>b</mi></mrow><mi>a</mi></mfrac></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-165" style="width: 5.263em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.378em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.68em, 1004.38em, 3.023em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-166"><span class="mi" id="MathJax-Span-167" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-168" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mfrac" id="MathJax-Span-169" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em, 1002.14em, 4.273em, -999.997em); top: -4.685em; left: 50%; margin-left: -1.091em;"><span class="mrow" id="MathJax-Span-170"><span class="mi" id="MathJax-Span-171" style="font-family: MathJax_Math-italic;">a</span><span class="mo" id="MathJax-Span-172" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="mi" id="MathJax-Span-173" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">b</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -0.258em;"><span class="mi" id="MathJax-Span-174" style="font-family: MathJax_Math-italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1002.29em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.294em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.872em; border-left: 0px solid; width: 0px; height: 2.628em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo>=</mo><mfrac><mrow><mi>a</mi><mo>−</mo><mi>b</mi></mrow><mi>a</mi></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-7">f=\frac{a-b}{a}</script>

<p>现在我们要用一个椭球体来近似地球体，那么这个椭球体的长半轴和短半轴分别是多少呢？另外这个椭球的中心位于哪个位置呢？这当然也是一个定义的问题。用地球的质心来作为椭球的中心是很自然的选择，当然随着地球的自转，这个位置会发生变化。接下来我们需要定义这个椭球体的摆放位置，在这之前我们首先定义笛卡尔坐标系统。这个坐标系统的原点就是质心，Z坐标就是质心指向北极的方向，XY轴的平面就是赤道平面，把赤道和格林尼治子午线(本初子午线)与赤道平面相交的点作为X轴，根据右手法则可以确定Y轴的方向，如下图所示：</p>

<p><a name="img24"><img src="/img/itp/24.jpg" alt=""></a></p>

<p>那么这个椭球体的长半轴a和短半轴b分别是多少呢？为了更好的”拟合”的地球体，科学家进行了测算(怎么算出来的我没搞明白，感兴趣的读者可以参考[<a href="#r_10">10</a><a name="rb_10"></a>])，得到如下的值：</p>

<p><a name="img25"><img src="/img/itp/25.jpg" alt=""></a></p>

<p>这个参考系统是1984年搞出来的，所以就叫做WGS-84(World Geodetic System, 世界大地测量系统)，目前的GPS就使用这个坐标系统，因此我们的GPS定位设备得到就是WGS-84的坐标值。为了计算和使用方便，我们通常使用经度、维度和高度的方法来描述地球表面的一个点，如下图所示：</p>

<p><a name="img27"><img src="/img/itp/27.jpg" alt=""></a>
<em>图：椭球坐标系示意图</em></p>

<p>对于点P，朝着椭球体做一条垂线，垂线与椭球相交与P’。因为对称性，直线PP’一定包含在某个扇面里。这个扇面与零度经线的夹角就是经度<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x03A6;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-175" style="width: 0.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.68em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-176"><span class="mi" id="MathJax-Span-177" style="font-family: MathJax_Main;">Φ</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Φ</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">\Phi</script>。同时PP’延长后会投射到赤道上某一点，从原点到这个点的直线与PP’的夹角就是维度<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03BB;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-178" style="width: 0.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1000.52em, 2.294em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-179"><span class="mi" id="MathJax-Span-180" style="font-family: MathJax_Math-italic;">λ</span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>λ</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">\lambda</script>，而PP’的长度就是高度h。</p>

<p>笛卡尔坐标和椭球坐标可以相互转化，比如下面的公式可以实现把笛卡尔坐标转化成椭球坐标：</p>

<p><a name="img28"><img src="/img/itp/28.jpg" alt=""></a></p>

<p>不过上面的公式里，<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>R</mi><mi>N</mi></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-181" style="width: 1.773em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.461em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.46em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-182"><span class="msubsup" id="MathJax-Span-183"><span style="display: inline-block; position: relative; width: 1.461em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-184" style="font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.784em;"><span class="mi" id="MathJax-Span-185" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>R</mi><mi>N</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-10">R_N</script>是依赖<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03D5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-186" style="width: 0.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1000.58em, 2.503em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-187"><span class="mi" id="MathJax-Span-188" style="font-family: MathJax_Math-italic;">ϕ</span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ϕ</mi></math></span></span><script type="math/tex" id="MathJax-Element-11">\phi</script>的，所以需要迭代才能求解。而把椭球坐标转化成笛卡尔坐标就很简单了：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax MathJax_FullWidth" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>x</mi><mo>=</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>R</mi><mi>N</mi></msub><mo>+</mo><mi>h</mi><mo stretchy=&quot;false&quot;>]</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>&amp;#x03D5;</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>&amp;#x03BB;</mi><mspace linebreak=&quot;newline&quot; /><mi>y</mi><mo>=</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>R</mi><mi>N</mi></msub><mo>+</mo><mi>h</mi><mo stretchy=&quot;false&quot;>]</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>&amp;#x03D5;</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>&amp;#x03BB;</mi><mspace linebreak=&quot;newline&quot; /><mi>z</mi><mo>=</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>R</mi><mi>N</mi></msub><mo stretchy=&quot;false&quot;>[</mo><mn>1</mn><mo>&amp;#x2212;</mo><msup><mi>e</mi><mn>2</mn></msup><mo stretchy=&quot;false&quot;>]</mo><mo>+</mo><mi>h</mi><mo stretchy=&quot;false&quot;>]</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>&amp;#x03D5;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-189" style="width: 100%; display: inline-block; min-width: 12.919em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(4.117em, 1010.73em, 8.388em, -999.997em); top: -4.997em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-190"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1009.59em, 4.43em, -999.997em); top: -4.008em; left: 50%; margin-left: -4.789em;"><span class="mi" id="MathJax-Span-191" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-192" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mo" id="MathJax-Span-193" style="font-family: MathJax_Main; padding-left: 0.263em;">[</span><span class="msubsup" id="MathJax-Span-194"><span style="display: inline-block; position: relative; width: 1.461em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-195" style="font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.784em;"><span class="mi" id="MathJax-Span-196" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-197" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-198" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">h</span><span class="mo" id="MathJax-Span-199" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-200" style="font-family: MathJax_Math-italic;">c</span><span class="mi" id="MathJax-Span-201" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-202" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-203" style="font-family: MathJax_Math-italic;">ϕ</span><span class="mi" id="MathJax-Span-204" style="font-family: MathJax_Math-italic;">c</span><span class="mi" id="MathJax-Span-205" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-206" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-207" style="font-family: MathJax_Math-italic;">λ</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.128em, 1009.53em, 4.43em, -999.997em); top: -2.602em; left: 50%; margin-left: -4.789em;"><span class="mspace" id="MathJax-Span-208" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-209" style="font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-210" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mo" id="MathJax-Span-211" style="font-family: MathJax_Main; padding-left: 0.263em;">[</span><span class="msubsup" id="MathJax-Span-212"><span style="display: inline-block; position: relative; width: 1.461em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-213" style="font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.784em;"><span class="mi" id="MathJax-Span-214" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-215" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-216" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">h</span><span class="mo" id="MathJax-Span-217" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-218" style="font-family: MathJax_Math-italic;">c</span><span class="mi" id="MathJax-Span-219" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-220" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-221" style="font-family: MathJax_Math-italic;">ϕ</span><span class="mi" id="MathJax-Span-222" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-223" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-224" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-225" style="font-family: MathJax_Math-italic;">λ</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.971em, 1010.73em, 4.43em, -999.997em); top: -0.987em; left: 50%; margin-left: -5.362em;"><span class="mspace" id="MathJax-Span-226" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-227" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-228" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mo" id="MathJax-Span-229" style="font-family: MathJax_Main; padding-left: 0.263em;">[</span><span class="msubsup" id="MathJax-Span-230"><span style="display: inline-block; position: relative; width: 1.461em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-231" style="font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.784em;"><span class="mi" id="MathJax-Span-232" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-233" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-234" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-235" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-236" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-237" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.471em;"><span class="mn" id="MathJax-Span-238" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-239" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-240" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-241" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">h</span><span class="mo" id="MathJax-Span-242" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-243" style="font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-244" style="font-family: MathJax_Math-italic;">i</span><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-246" style="font-family: MathJax_Math-italic;">ϕ</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 5.003em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -3.934em; border-left: 0px solid; width: 0px; height: 4.941em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>x</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>R</mi><mi>N</mi></msub><mo>+</mo><mi>h</mi><mo stretchy="false">]</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>ϕ</mi><mi>c</mi><mi>o</mi><mi>s</mi><mi>λ</mi><mspace linebreak="newline"></mspace><mi>y</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>R</mi><mi>N</mi></msub><mo>+</mo><mi>h</mi><mo stretchy="false">]</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>ϕ</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>λ</mi><mspace linebreak="newline"></mspace><mi>z</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>R</mi><mi>N</mi></msub><mo stretchy="false">[</mo><mn>1</mn><mo>−</mo><msup><mi>e</mi><mn>2</mn></msup><mo stretchy="false">]</mo><mo>+</mo><mi>h</mi><mo stretchy="false">]</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>ϕ</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-12">x = [R_N+h]  cos \phi  cos \lambda \\
y = [R_N+h]  cos \phi  sin \lambda \\
z = [R_N  [1 - e^2]+h]sin \phi</script>

<p>椭球非常适合描述经度和维度表示的点的位置。高程要么基于地球体(大地水准面)要么基于参考椭球。它们之间的关系如下图：</p>

<p><a name="img279"><img src="/img/itp/29.jpg" alt=""></a>
<em>图：地球体与椭球之间的差异</em></p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>=</mo><mi>H</mi><mo>+</mo><mi>N</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-247" style="width: 5.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.898em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1004.9em, 2.451em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-248"><span class="mi" id="MathJax-Span-249" style="font-family: MathJax_Math-italic;">h</span><span class="mo" id="MathJax-Span-250" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-251" style="font-family: MathJax_Math-italic; padding-left: 0.263em;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-252" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-253" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.184em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mo>=</mo><mi>H</mi><mo>+</mo><mi>N</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-13">h=H+N</script>

<p>其中，h是到参考椭球的高度，H是到地球体的高度，而N称为大地水准面起伏。我们从某些测绘地图得到的海拔高度就是H，而从GPS拿到的是h，这一点要注意。</p>

<p>WGS-84是为了拟合整个地球体而定义出来的一种大地测量系统，但是不见得是对某个国家或者地区最优的方式。比如下图：</p>

<p><a name="img26"><img src="/img/itp/26.jpg" alt=""></a>
<em>图：本地(local)参考椭球体</em></p>

<p>我们完全可以定义原点不在地球质心，而且长短半轴比WGS-84小但是拟合的更好的参考椭球体。比如国家A，我们可能定义一种大地测量系统；对于国家B，则使用另外一种。中国于上世纪50年代和80年代分别建立了1954年北京坐标系和1980西安坐标系[<a href="#r_11">11</a><a name="rb_11"></a>]，最新的规范是2000国家大地坐标系[<a href="#r_12">12</a><a name="rb_12"></a>]，不过最新的规范在2018年7月1日才开始全面使用[<a href="#r_13">13</a><a name="rb_13"></a>]。这些坐标系统和WGS-84不同，因此使用时可能需要在它们之间进行转换。</p>

<p>另外如果我们在中国大陆使用地图服务的话，我们可能会看到GCJ-02这个坐标系统，这又是什么东西呢？GCJ-02是国家测绘局(国测局，GCJ，这样的缩写比较罕见)02号标准的意思。它是一种对经纬度数据的加密算法，即加入随机的偏差。国内出版的各种地图系统(包括电子形式)，必须至少采用GCJ-02对地理位置进行首次加密[<a href="#r_14">14</a><a name="rb_14"></a>]。由于最开始的时候一些国外地图服务商没搞明白这点，直接使用了GCJ-02加密的坐标来显示POI，从而把这些POI移到太平洋上去了，所以网友也戏称火星坐标。根据[<a href="#r_15">15</a><a name="rb_15"></a>]，据说为了避免泄露国家机密，国家测绘局的专家设计了一种地形图非线性保密处理技术。其实就是对原始坐标(比如WSG-84)进行一个非线性的变换，这个变换会导致POI的经纬度相对于原来发生一定偏移，但是还是会尽量保证POI之间的相对位置关系(否则把北京变到南京南边就坏了)。从数学上来说这是一个不可逆的过程，我们不能求这个变换函数的反函数，因此无法精确的根据加密后(GCJ-02)的坐标得到原始的坐标。但是这个算法是公开的(在任何地图相关的终端你都必须实现这个算法，当然就很容易泄露出去了)，因此可以用迭代的方法求近似解。网上有一些算法能够近似的把GCJ-02坐标系统转换成原始坐标的经纬度，感兴趣的读者可以参考[<a href="#r_16">16</a><a name="rb_16"></a>][<a href="#r_18">18</a><a name="rb_18"></a>]。百度地图的坐标在GCJ-02的基础上又做了一次非线性变化，得到的坐标叫做BD-09坐标[<a href="#r_17">17</a><a name="rb_17"></a>]。根据[<a href="#r_18">18</a>]，简单的解密能够到达米级别的精度，如果使用更多次的迭代还可以得到更高精度的解，所以当初专家们的设计安全目标并没有达成。但这并不妨碍这个算法仍然不知疲倦的在各种设备里运行大量无意义的计算(增加碳排量)并且他们通过授权插件使用权获得大量收入。</p>

<h2 id="地图投影">地图投影<a class="anchorjs-link " href="#地图投影" aria-label="Anchor link for: 地图投影" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>虽然用椭球坐标的经度、维度和高程来描述地球表面的一个点很方便，但是我们不能成天捧个地球仪出门，日常生活中我们更习惯把各种地标信息绘制在一张平面的纸上，这样方便携带。把三维椭球体表面附近的点映射到二维平面上的方法就叫做地图投影。把一个高维的数据投影成低维的空间总会损失一些信息，当然也会保留一些信息，根据我们希望保留哪些信息就能找到不同的投影方法。<a href="https://weibo.com/tv/v/4278051237002788?fid=1034:4278051237002788">为什么地图都是错的</a>是一个很有意思的视频，感兴趣的读者可以看看。下面我们介绍几种常见的地图投影方法。</p>

<h3 id="墨卡托投影mercator-projection">墨卡托投影(Mercator Projection)<a class="anchorjs-link " href="#墨卡托投影mercator-projection" aria-label="Anchor link for: 墨卡托投影mercator projection" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>根据[<a href="#r_19">19</a><a name="rb_19"></a>][<a href="#r_20">20</a><a name="rb_20"></a>]，墨卡托投影的原理如下图所示：</p>

<p><a name="img30"><img src="/img/itp/30.jpg" alt=""></a>
<em>图：墨卡托投影</em></p>

<p>假设地球是一个椭球体，我们用很大的一张纸卷成一个圆柱体把地球包起来。然后对于地球表面的每一个点P，我们都可以从地心发出一条经过改点的射线，然后与圆柱体(纸卷)相交于点P’，P’就是P在地图上的投影。通过把所有(当然理论上是无穷的，但是我们可以采样足够多就行)点都进行这样的投影，就可以把地球表面的每一个点都投射到纸卷上。最后我们把这个纸卷展开，就得到了地球的墨卡托投影。北极和南极附近的点会投影到Y轴方向很大的值(极点会投影到Y为无穷大的地方)，我们没有那么大的纸，而且南极和北极除了企鹅和北极熊也没有太多人类，没有太大看地图的需求，所以通常我们只是投影到最高维度为正负85.05度就行。另外我们需要定义平面笛卡尔坐标的原点和XY轴方向，墨卡托投影的原点就是经纬度都是0度的点的投影(本初子午线和赤道的交点)，赤道的投影为X轴，本初子午线的投影为Y轴。从西往东为X的正方向，从南往北为Y的正方向。这样的结果使得整个地图以本初子午线(欧洲)为中心，它的东西方向对于地图的右边和左边，而南北极位于它的下方和上方。</p>

<p>墨卡托投影特点如下：</p>

<ul>
  <li>原来的经线(子午线)都汇聚于极点，纬度愈高经线的间距愈小，而在墨卡托投影上，经线全部画成与赤道上间隔相等的平行直线
    <ul>
      <li>我们把地球想象成一个西瓜，然后两条经线就是从上往下切西瓜，切出来一瓣一瓣的西瓜。原来的西瓜的两条经线会相交于南北极，但是展开后就变成了一个长方形。</li>
    </ul>
  </li>
  <li>地球表面上假想的各纬线间隔基本是相等的，而在墨卡托投影上纬线间隔由赤道向两极逐渐扩大，而且经纬线以同一倍数扩大
    <ul>
      <li>因为这个特性，维度越高的地方南北方向的放大效应越大</li>
    </ul>
  </li>
  <li>墨卡托投影上经、纬线均为平行直线而且经纬线之间互相正交
    <ul>
      <li>这个就是前面说的一瓣被掰扯成一个长方形。</li>
    </ul>
  </li>
  <li>地球上的等角航线在地图上均表现为直线
    <ul>
      <li>这个后面详细解释</li>
    </ul>
  </li>
  <li>图上能正确表示航线与子午线的夹角，例如航线在地球上与子午线的夹角为15°，图上也表示为15°
    <ul>
      <li>同上</li>
    </ul>
  </li>
  <li>比例尺随纬度而变化，在一张地图上纬度不同，同一距离的比例尺也不同，不能比较面积</li>
</ul>

<p>下面我们来解释一下什么是等角航线。根据[<a href="#r_21">21</a><a name="rb_21"></a>][<a href="#r_22">22</a><a name="rb_22"></a>]，等角航线是指地球面上一条与所有经线相交成等方位角的曲线，又名恒向线、斜航线。在地球表面上除经线和纬线以外的等角航线，都是以极点为渐近点的螺旋曲线，如下图所示：</p>

<p><a name="img31"><img src="/img/itp/31.png" alt=""></a>
<em>图：等角航线，来自维基百科</em></p>

<p>我们先来看两个特殊情况，如果我们沿着与经线(与真北方向平行的方向)运动，显然我们走的是圆形(地球这个球体上的一个圆)的弧线。类似如果我们沿着纬线(与赤道平行)运动，我们也是走一个圆形的轨迹。否则，如果我们从地球上任意一个点沿着与经线(真北方向)保持一个固定的夹角运动，我们会沿着一条螺旋曲线运动，并且最终的极限点是极点(上图是北极)。在没有GPS等精确定位的大航海年代，我们通常会沿着等角航线来进行航海。为什么要用这种方法呢？因为测量船只与经线的角度是比较容易的，我们有罗盘，我们在墨卡托投影的地图上找到起点和终点，然后画出一条直线，这条直线与真北方向的夹角就是我们航线的角度。我们只要保持船只的方向不变，经过螺旋的曲线就能达到目的地。能够实现这个目标的关键就是墨卡托投影能够正确表示航线与子午线的夹角，从而使得等角航线在地图上表现为直线。</p>

<p>等角航线不是球面上最短的曲线，最短的曲线是经过这两点的大圆的一段劣(短)弧，这就是所谓的大圆航线[<a href="#r_23">23</a><a name="rb_23"></a>][<a href="#r_24">24</a><a name="rb_24"></a>]。但是这段圆弧与经线的夹角显然不会不变(除非起点和终点的经度或者维度相同)，这需要航行的时候经常修正航线，这对大航海时代的船长来说难度就很大。现代有了GPS等更加先进定位技术之后，长途飞机和船只就能走更短的大圆航线了，不过实际由于领空/领海等政治因素的限制，大部分航班并不是走的最短的路线。</p>

<p>但是墨卡托投影对于高纬度的几何体的放大作用是大于低纬度的形体的，因此如果在墨卡托投影的地图上测量中国和格陵兰岛，会发现格陵兰岛的面积会比中国大。如下图所示：</p>

<p><a name="img32"><img src="/img/itp/32.jpg" alt=""></a>
<em>图：格陵兰岛和中国</em></p>

<p>注意：上面的墨卡托投影选择的是使用一个圆柱体来包(切)住椭球体。但是也可以用别的的圆柱体，这个圆柱体不一定能恰好”包”住椭球体，它可能把椭球体割开，所以叫做割圆柱投影。比如下图：</p>

<p><a name="img34"><img src="/img/itp/34.jpg" alt=""></a>
<em>图：正轴等角(割)圆柱投影</em></p>

<h3 id="高斯-克吕格投影">高斯-克吕格投影<a class="anchorjs-link " href="#高斯-克吕格投影" aria-label="Anchor link for: 高斯 克吕格投影" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>高斯-克吕格投影又称为横轴墨卡托投影，西方喜欢用这个名字，中国喜欢叫高斯-克吕格投影或者高斯投影。它是由德国数学家、物理学家、天文学家高斯于19世纪20年代拟定，后经德国大地测量学家克吕格于1912年对投影公式加以补充，故称为高斯-克吕格投影。根据[<a href="#r_25">25</a><a name="rb_25"></a>][<a href="#r_26">26</a><a name="rb_26"></a>][<a href="#r_27">27</a><a name="rb_27"></a>]，高斯-克吕格投影的方法如下：</p>

<p>和墨卡托投影类似，我们用一个椭圆柱把椭球体包起来，只不过是横过来，这就是横轴墨卡托这个名字的来由。为什么墨卡托用一个圆柱来包，而横轴墨卡托用椭圆柱来包呢？原因是我们把椭圆绕南北极旋转得到假想的地球体，因此用一个与赤道平行的平面去切这个椭球得到的是一个圆，但是从垂直于赤道的方向去切的话得到的是椭球，所以横轴墨卡托要用椭圆柱去包。</p>

<p><a name="img33"><img src="/img/itp/33.jpg" alt=""></a>
<em>图：高斯-克吕格投影</em></p>

<p>如上图所示，如果我们选定一根子午线(经线)作为中心子午线，然后左右各选择相邻的3度经线来切西瓜，就可以得到一瓣西瓜，用前面墨卡托投影类似的方法我们可以把这一瓣西瓜投影成一根长方形。然后我们再转到地球6度，又切出一瓣西瓜，……，最终我们把地球切成60个6度的西瓜，把60个正方形拼接起来就得到全球的地图。当然通常高斯-克吕格投影只是用来绘制一根国家的地图，所以只需要切少量数量的西瓜就行，而且西瓜的中心子午线和西瓜跨越的经度是可以根据需要来调整的。中国的经度范围西起73°东至135°，可分成六度带十一个，各带中央经线依次为75°、81°、87°、……、117°、123°、129°、135°，或三度带二十二个。六度带可用于中小比例尺(如 1:250000)测图，三度带可用于大比例尺(如 1:10000)测图，城建坐标多采用三度带的高斯投影。</p>

<p>高斯-克吕格投影是按分带方法各自进行投影，故各带坐标成独立系统。以中央经线投影为纵轴(x), 赤道投影为横轴(y),两轴交点即为各带的坐标原点。纵坐标以赤道为零起算，赤道以北为正，以南为负。我国位于北半球，纵坐标均为正值。横坐标如以中央经线为零起算，中央经线以东为正，以西为负，横坐标出现负值，使用不便，故规定将坐标纵轴西移500公里当作起始轴，凡是带内的横坐标值均加500公里。由于高斯-克吕格投影每一个投影带的坐标都是对本带坐标原点的相对值，所以各带的坐标完全相同，为了区别某一坐标系统属于哪一带，在横轴坐标前加上带号，如(4231898m,<strong>21</strong>655933m)，其中21即为带号。</p>

<h3 id="utm投影">UTM投影<a class="anchorjs-link " href="#utm投影" aria-label="Anchor link for: utm投影" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>UTM是通用横轴墨卡托投影(Universal Transverse Mercator)的缩写[<a href="#r_28">28</a><a name="rb_28"></a>]。因为横轴墨卡托投影不同国家用不同的分带方法，这样无法统一，因此定义通用(Universal)的切西瓜方式如下：将地球划分为60个投影带，每带经差为6度。另外与横轴墨卡托投影不同，这里不是用一个椭圆柱横着把地球完整包(相切)起来，而是用一个小一点圆柱”包”(割)住北纬84度和南纬80度直接的这部分地球。UTM投影与高斯投影的主要区别在南北格网线的比例系数上，高斯-克吕格投影的中央经线投影后保持长度不变，即比例系数为1，而UTM投影的比例系数为0.9996。UTM投影沿每一条南北格网线比例系数为常数，在东西方向则为变数，中心格网线的比例系数为0.9996，在南北纵行最宽部分的边缘上距离中心点大约363公里，比例系数为1.00158。高斯-克吕格投影与UTM投影可近似采用 <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>t</mi><mi>m</mi></mrow></msub><mo>=</mo><mn>0.9996</mn><mo>&amp;#x2217;</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x9AD8;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x65AF;</mo></mrow></mrow></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-254" style="width: 11.096em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.221em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1009.22em, 2.711em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-255"><span class="msubsup" id="MathJax-Span-256"><span style="display: inline-block; position: relative; width: 2.19em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-257" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-258"><span class="mrow" id="MathJax-Span-259"><span class="mi" id="MathJax-Span-260" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-261" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-262" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-263" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mn" id="MathJax-Span-264" style="font-family: MathJax_Main; padding-left: 0.263em;">0.9996</span><span class="mo" id="MathJax-Span-265" style="font-family: MathJax_Main; padding-left: 0.211em;">∗</span><span class="msubsup" id="MathJax-Span-266" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.034em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-267" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -1.924em; left: 0.836em;"><span class="texatom" id="MathJax-Span-268"><span class="mrow" id="MathJax-Span-269"><span class="texatom" id="MathJax-Span-270"><span class="mrow" id="MathJax-Span-271"><span class="mo" id="MathJax-Span-272" style="font-size: 70.7%;"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 83%; font-style: normal; font-weight: normal;">高</span></span></span></span><span class="texatom" id="MathJax-Span-273"><span class="mrow" id="MathJax-Span-274"><span class="mo" id="MathJax-Span-275" style="font-size: 70.7%;"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 83%; font-style: normal; font-weight: normal;">斯</span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.378em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>t</mi><mi>m</mi></mrow></msub><mo>=</mo><mn>0.9996</mn><mo>∗</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo>高</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>斯</mo></mrow></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-14">X_{utm}=0.9996 * X_{高斯}</script>，<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>t</mi><mi>m</mi></mrow></msub><mo>=</mo><mn>0.9996</mn><mo>&amp;#x2217;</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x9AD8;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x65AF;</mo></mrow></mrow></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-276" style="width: 10.523em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.753em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1008.75em, 2.711em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-277"><span class="msubsup" id="MathJax-Span-278"><span style="display: inline-block; position: relative; width: 1.93em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-279" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-280"><span class="mrow" id="MathJax-Span-281"><span class="mi" id="MathJax-Span-282" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-283" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-284" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-285" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mn" id="MathJax-Span-286" style="font-family: MathJax_Main; padding-left: 0.263em;">0.9996</span><span class="mo" id="MathJax-Span-287" style="font-family: MathJax_Main; padding-left: 0.211em;">∗</span><span class="msubsup" id="MathJax-Span-288" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.826em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-289" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -1.924em; left: 0.576em;"><span class="texatom" id="MathJax-Span-290"><span class="mrow" id="MathJax-Span-291"><span class="texatom" id="MathJax-Span-292"><span class="mrow" id="MathJax-Span-293"><span class="mo" id="MathJax-Span-294" style="font-size: 70.7%;"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 83%; font-style: normal; font-weight: normal;">高</span></span></span></span><span class="texatom" id="MathJax-Span-295"><span class="mrow" id="MathJax-Span-296"><span class="mo" id="MathJax-Span-297" style="font-size: 70.7%;"><span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 83%; font-style: normal; font-weight: normal;">斯</span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.378em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>t</mi><mi>m</mi></mrow></msub><mo>=</mo><mn>0.9996</mn><mo>∗</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo>高</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>斯</mo></mrow></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-15">Y_{utm}=0.9996 * Y_{高斯}</script>进行坐标转换。</p>

<h3 id="兰勃特投影">兰勃特投影<a class="anchorjs-link " href="#兰勃特投影" aria-label="Anchor link for: 兰勃特投影" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>中国的基本比例尺地形图(1：100万、1：50万、1：25万、1：10万、1：5万、1：2.5万、1：1万、1：5000)除1：100万以外均采用高斯-克吕格为地理基础。而1：100万地形图采用兰勃特投影，所以我们也介绍一下这个投影。兰勃特投影是由德国数学家兰勃特(J.H.Lambert)设计的正形圆锥投影[<a href="#r_29">29</a><a name="rb_29"></a>][<a href="#r_30">30</a><a name="rb_30"></a>]。如下图所示：</p>

<p><a name="img35"><img src="/img/itp/35.png" alt=""></a>
<em>图片来自<a href="http://ayresriverblog.com/2011/05/19/the-world-is-flat/">The World is Flat</a></em></p>

<p>可以用一个圆锥体正向(从上往下)去切或者割这个椭球体，然后地心发出射线进行投影。</p>

<p>兰勃特投影的特点是：</p>

<ul>
  <li>角度没有变形，即投影前后对应的微分面积保持图形相似，故亦可称为正形投影。</li>
  <li>等变形线和纬线一致，即同一条纬线上的变形处处相等。</li>
  <li>两条标准纬线上没有任何变形。</li>
  <li>在同一经线上，两标准纬线外侧为正变形(长度比大于1)，而两标准纬线之间为负变形(长度比小于1)。因此，变形比较均匀，变形绝对值也比较小。</li>
  <li>同一纬线上等经差的线段长度相等，两条纬线间的经纬线长度处处相等。</li>
</ul>

<p>我国1：100万地形图采用了兰勃特投影，其分幅原则与国际地理学会规定的全球统一使用的国际百万分之一地图投影一致。纬度按纬差4°分带，从南到北共分成15个投影带，每个投影带单独计算坐标，每带两条标准纬线，第一标准纬线为图幅南端纬度加30′的纬线，第二标准纬线为图幅北端纬度减30′的纬线，这样处于同一投影带中的各图幅的坐标成果完全相同，不同带的图幅变形值接近相等，因此每投影带只需计算其中一幅图(纬差4°，经差6°)的投影成果即可。由于是纬差4°分带投影的，所以当沿着纬线方向拼接地图时，不论多少图幅，均不会产生裂隙；但是，当沿着经线方向拼接时，因拼接线分别处于上下不同的投影带，投影后的曲率不同，致使拼接时产生裂隙。</p>

<h2 id="时间系统">时间系统<a class="anchorjs-link " href="#时间系统" aria-label="Anchor link for: 时间系统" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>因为GPS使用电磁波的行程时间来计算距离(伪距)，而电磁波以光速前进，细微的时间误差都会导致很大的空间误差。虽然GPS接收器可以通过多余的一颗卫星来消除本身和GPS卫星的时间差，但是GPS卫星本身(GPS卫星之间)的时钟必须非常精确的同步。下面我们来介绍一下GPS涉及到的5个重要时间系统。</p>

<h3 id="国际原子时tai">国际原子时(TAI)<a class="anchorjs-link " href="#国际原子时tai" aria-label="Anchor link for: 国际原子时tai" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>国际原子时标(国际原子时，TAI)是为了形成统一的”绝对”时标而建立的，它可同时满足各种用途的不同物理要求。其中的用途之一是GPS定位，时标在里面起到非常重要的作用。自1967年起，秒被定义为原子物理常数。非放射性元素铯(133 Cs)被选作基准。铯原子选定能级之间的谐振频率被规定为9192631770Hz。以此定义的时间成为SI计量系统(国际单位制)的一部分。原子时的起点被设定为1958年1月1日0时0分。</p>

<h3 id="协调世界时utc">协调世界时(UTC)<a class="anchorjs-link " href="#协调世界时utc" aria-label="Anchor link for: 协调世界时utc" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>
<p>引入协调世界时(UTC)是为了提供以原子时为基础可用于地球现实世界时间的时标。协调世界时以前称为格林尼治标准时间(GMT)或世界时。协调世界时与国际原子时的差别在于秒的计数上，即UTC＝TAI-n，其中n等于所有累加的秒数，可在每年12月31日和6月30日结束时增加一个闰秒。闰秒因其反映了地球自转变缓趋势而非常必要，并能对时钟进行修正以保持时间的统一和精确。</p>

<p>原子钟时是一种非常精确的定义，那么为什么要搞一个闰秒让大家的生活变得如此艰难呢？因为地球绕太阳的运动并不规律，按照现在的定义每天86400秒太阳会在早上升起，但是时间长了也许到了我们几百代子孙之后早上八点可能变成了太阳落山(即使太阳晚升起半个小时也让人类不习惯)，所以需要定期修正。但是地球的精确位置很难计算，只能定期通过测量来决定在哪年的12月31日和6月30日结束时增加一个闰秒。</p>

<h3 id="gps时">GPS时<a class="anchorjs-link " href="#gps时" aria-label="Anchor link for: gps时" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>通常GPS系统时间被表述为星期数及该星期已消逝的秒数。其起始日期为1980年1月6日星期日0时0分(UTC)。每个GPS星期开始于星期六与星期日之间的午夜，此时由主控站的母钟提供连续时标。GPS时与协调世界时之间的时差被连续处理并包含在导航信息中。GPS时与协调世界时的区别在于所有累加的秒数(2009年GPS时间与协调世界时相差15s)以及对秒的划分。GPS控制站保持GPS时的秒标记与协调世界时相差不超过1μs。GPS时与协调世界时的时差和GPS导航信息在子帧(后面会介绍)中一同发送。</p>

<p>因为GPS的目的主要是同步时间而不是要我们知道早上八点该起床了，所以它使用的其实是原子时钟。也就是当前时刻与起始时间的时差，但是为了便于理解，才转换成年月日时分秒。但是前面说了UTC的闰秒很麻烦，时不时要调整卫星的原子钟。GPS系统不想揽这个活，把这个任务留个GPS的用户，反正从定位的角度来说只要每个卫星的时间同步就行，快个半秒一秒的不影响定位。</p>

<h3 id="卫星时">卫星时<a class="anchorjs-link " href="#卫星时" aria-label="Anchor link for: 卫星时" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>
<p>由于GPS卫星所载原子钟固有的和不规则的频率误差，各卫星的时间会与GPS系统时间存在偏差。控制站对卫星时钟进行监控，并通知任何观察到的时差。在进行本地GPS测量时应考虑时间偏差。</p>

<h3 id="地方时">地方时<a class="anchorjs-link " href="#地方时" aria-label="Anchor link for: 地方时" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>地方时是指特定地区或区域所使用的时间。地方时与协调世界时的关系由时区及有关标准和夏令时的规定确定。更多历法时间的内容可以参考<a href="/2019/03/27/calendar/">日历相关的算法</a>。</p>

<p>以下时间值在2009年内有效：</p>

<ul>
  <li>国际原子时-协调世界时＝+34s</li>
  <li>GPS时-协调世界时＝+15s</li>
  <li>国际原子时-GPS时＝+19s</li>
</ul>

<h2 id="位置计算方法">位置计算方法<a class="anchorjs-link " href="#位置计算方法" aria-label="Anchor link for: 位置计算方法" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>前面我们介绍过GPS定位的原理，如果GPS接收器能够严格与GPS卫星时间进行同步，理论上只需要接收到3颗卫星的行程时间从而乘以光速就得到距离，再根据发生时间(收到时间-行程时间)可以知道卫星在发射时的精确位置，从而可以定位GPS接收器。但是由于GPS接收器很难保持与GPS卫星的时间严格同步，所以我们需要把GPS接收器与GPS卫星的时间差也当成一个未知变量，因此需要4颗卫星才能定位。如下图所示：</p>

<p><a name="img36"><img src="/img/itp/36.jpg" alt=""></a>
<em>图：实际定位需要4颗卫星</em></p>

<p>通过接收到的信号，我们可以获得4颗信号的行程时间<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>1</mn></msub><mo>,</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>2</mn></msub><mo>,</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>3</mn></msub><mo>,</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>4</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-298" style="width: 9.378em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.815em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1007.82em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-299"><span class="mi" id="MathJax-Span-300" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-301"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-302" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-303" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-304" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-305" style="font-family: MathJax_Main; padding-left: 0.159em;">Δ</span><span class="msubsup" id="MathJax-Span-306"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-307" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-308" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-309" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-310" style="font-family: MathJax_Main; padding-left: 0.159em;">Δ</span><span class="msubsup" id="MathJax-Span-311"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-313" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-314" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-315" style="font-family: MathJax_Main; padding-left: 0.159em;">Δ</span><span class="msubsup" id="MathJax-Span-316"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-317" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-318" style="font-size: 70.7%; font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>1</mn></msub><mo>,</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>2</mn></msub><mo>,</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>3</mn></msub><mo>,</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>4</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-16">\Delta t_1, \Delta t_2, \Delta t_3, \Delta t_4</script>，也就是接收时间-发送时间。注意：GPS接收器某一时刻收到的4颗GPS卫星发来的信号的发送时间是不同的，因为4颗卫星的位置是不同的，但是肯定都是同一个时刻(瞬间)被GPS接收器接收到。我们收到信号后根据信号的内容就能”解码”出这个信号的发送时间(后面会介绍怎么实现解码)，而且我们认为GPS卫星的时间是同步于UTC的(严格来说是GPS时间，和UTC有固定的秒数差异，前面介绍过，GPS接收器可以校正)。我们假设GPS接收器与GPS卫星的时间差是<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-319" style="width: 1.982em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.62em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-320"><span class="mi" id="MathJax-Span-321" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-322"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-323" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-324" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-17">\Delta t_0</script>，如果<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&amp;gt;</mo><mn>0</mn></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-325" style="width: 4.169em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.44em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1003.39em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-326"><span class="mi" id="MathJax-Span-327" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-328"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-329" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-330" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-331" style="font-family: MathJax_Main; padding-left: 0.263em;">&gt;</span><span class="mn" id="MathJax-Span-332" style="font-family: MathJax_Main; padding-left: 0.263em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&gt;</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-18">\Delta t_0>0</script>表明接收器的时间快了，如果<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&amp;lt;</mo><mn>0</mn></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-333" style="width: 4.169em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.44em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1003.39em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-334"><span class="mi" id="MathJax-Span-335" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-336"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-337" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-338" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-339" style="font-family: MathJax_Main; padding-left: 0.263em;">&lt;</span><span class="mn" id="MathJax-Span-340" style="font-family: MathJax_Main; padding-left: 0.263em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&lt;</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-19">\Delta t_0<0</script>则表示慢了那么多秒。我们可以测量到的行程时间并不是”真正”的行程时间，而是行程时间加<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-341" style="width: 1.982em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.62em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-342"><span class="mi" id="MathJax-Span-343" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-344"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-345" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-346" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-20">\Delta t_0</script>。因此我们用测量的行程时间乘以光速得到不是”真实”的距离，而是”伪”距(pseudo range, PSR)：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display"><span class="MathJax MathJax_FullWidth" id="MathJax-Element-21-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mi>t</mi><mo>+</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mspace linebreak=&quot;newline&quot; /><mi>P</mi><mi>S</mi><mi>R</mi><mo>=</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>&amp;#x22C5;</mo><mi>c</mi><mo>=</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mi>t</mi><mo>+</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&amp;#x22C5;</mo><mi>c</mi><mspace linebreak=&quot;newline&quot; /><mi>P</mi><mi>S</mi><mi>R</mi><mo>=</mo><mi>R</mi><mo>+</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&amp;#x22C5;</mo><mi>c</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-347" style="width: 100%; display: inline-block; min-width: 18.544em;"><span style="display: inline-block; position: relative; width: 100%; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.648em, 1015.37em, 7.503em, -999.997em); top: -4.529em; left: 0em; width: 100%;"><span class="mrow" id="MathJax-Span-348"><span style="display: inline-block; position: relative; width: 100%; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1009.69em, 4.326em, -999.997em); top: -4.008em; left: 50%; margin-left: -4.841em;"><span class="mi" id="MathJax-Span-349" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-350"><span style="display: inline-block; position: relative; width: 3.492em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-351" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="texatom" id="MathJax-Span-352"><span class="mrow" id="MathJax-Span-353"><span class="mi" id="MathJax-Span-354" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-355" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-356" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-357" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-358" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-359" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-360" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-361" style="font-size: 70.7%; font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-362" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-363" style="font-family: MathJax_Main; padding-left: 0.263em;">Δ</span><span class="mi" id="MathJax-Span-364" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-365" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-366" style="font-family: MathJax_Main; padding-left: 0.211em;">Δ</span><span class="msubsup" id="MathJax-Span-367"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-368" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-369" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.128em, 1015.37em, 4.326em, -999.997em); top: -2.706em; left: 50%; margin-left: -7.706em;"><span class="mspace" id="MathJax-Span-370" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-371" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-372" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-373" style="font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-374" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-375" style="font-family: MathJax_Main; padding-left: 0.263em;">Δ</span><span class="msubsup" id="MathJax-Span-376"><span style="display: inline-block; position: relative; width: 3.492em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-377" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="texatom" id="MathJax-Span-378"><span class="mrow" id="MathJax-Span-379"><span class="mi" id="MathJax-Span-380" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mi" id="MathJax-Span-381" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-382" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-383" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-384" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-385" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span><span class="mi" id="MathJax-Span-386" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-387" style="font-size: 70.7%; font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-388" style="font-family: MathJax_Main; padding-left: 0.211em;">⋅</span><span class="mi" id="MathJax-Span-389" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">c</span><span class="mo" id="MathJax-Span-390" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-391" style="font-family: MathJax_Main; padding-left: 0.263em;">Δ</span><span class="mi" id="MathJax-Span-392" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-393" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-394" style="font-family: MathJax_Main; padding-left: 0.211em;">Δ</span><span class="msubsup" id="MathJax-Span-395"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-396" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-397" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-398" style="font-family: MathJax_Main; padding-left: 0.211em;">⋅</span><span class="mi" id="MathJax-Span-399" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">c</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.128em, 1008.18em, 4.326em, -999.997em); top: -1.404em; left: 50%; margin-left: -4.06em;"><span class="mspace" id="MathJax-Span-400" style="height: 0em; vertical-align: 0em; width: 0em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-401" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-402" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-403" style="font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-404" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="mi" id="MathJax-Span-405" style="font-family: MathJax_Math-italic; padding-left: 0.263em;">R</span><span class="mo" id="MathJax-Span-406" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-407" style="font-family: MathJax_Main; padding-left: 0.211em;">Δ</span><span class="msubsup" id="MathJax-Span-408"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-409" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-410" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-411" style="font-family: MathJax_Main; padding-left: 0.211em;">⋅</span><span class="mi" id="MathJax-Span-412" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">c</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.534em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -3.434em; border-left: 0px solid; width: 0px; height: 4.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mspace linebreak="newline"></mspace><mi>P</mi><mi>S</mi><mi>R</mi><mo>=</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>⋅</mo><mi>c</mi><mo>=</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mo>⋅</mo><mi>c</mi><mspace linebreak="newline"></mspace><mi>P</mi><mi>S</mi><mi>R</mi><mo>=</mo><mi>R</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mo>⋅</mo><mi>c</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-21">\Delta t_{measured} = \Delta t + \Delta t_0 \\
PSR = \Delta t_{measured} \cdot c = \Delta t + \Delta t_0 \cdot c \\
PSR = R + \Delta t_0 \cdot c</script>

<p>上式中R是卫星和接收器的真实距离，但是未知；c是光速常量；<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-413" style="width: 1.461em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.201em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.15em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-414"><span class="mi" id="MathJax-Span-415" style="font-family: MathJax_Main;">Δ</span><span class="mi" id="MathJax-Span-416" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-22">\Delta t</script>是卫星到接收器的”真正”行程时间，未知；<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-417" style="width: 1.982em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.62em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-418"><span class="mi" id="MathJax-Span-419" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-420"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-421" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-422" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-23">\Delta t_0</script>是卫星时钟和接收器时钟的差；PSR是伪距。根据距离计算公式：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mo>=</mo><msqrt><mo stretchy=&quot;false&quot;>(</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></msqrt></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-423" style="width: 29.273em; display: inline-block;"><span style="display: inline-block; position: relative; width: 24.378em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.836em, 1024.38em, 2.971em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-424"><span class="mi" id="MathJax-Span-425" style="font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-426" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="msqrt" id="MathJax-Span-427" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 22.294em; height: 0px;"><span style="position: absolute; clip: rect(2.971em, 1021.3em, 4.43em, -999.997em); top: -4.008em; left: 0.992em;"><span class="mrow" id="MathJax-Span-428"><span class="mo" id="MathJax-Span-429" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-430"><span style="display: inline-block; position: relative; width: 1.878em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-431" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-432"><span class="mrow" id="MathJax-Span-433"><span class="mi" id="MathJax-Span-434" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-435" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-436" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-437" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-438" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-439" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-440"><span class="mrow" id="MathJax-Span-441"><span class="mi" id="MathJax-Span-442" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-443" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-444" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-445" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-446"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-447" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-448" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-449" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-450" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="msubsup" id="MathJax-Span-451"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-452" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-453"><span class="mrow" id="MathJax-Span-454"><span class="mi" id="MathJax-Span-455" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-456" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-457" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-458" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-459" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.034em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-460" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-461"><span class="mrow" id="MathJax-Span-462"><span class="mi" id="MathJax-Span-463" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-464" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-465" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-466" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-467"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-468" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-469" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-470" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-471" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="msubsup" id="MathJax-Span-472"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-473" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-474"><span class="mrow" id="MathJax-Span-475"><span class="mi" id="MathJax-Span-476" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-477" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-478" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-479" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-480" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-481" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-482"><span class="mrow" id="MathJax-Span-483"><span class="mi" id="MathJax-Span-484" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-485" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-486" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-487" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-488"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-489" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-490" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.596em, 1021.25em, 3.961em, -999.997em); top: -4.893em; left: 0.992em;"><span style="display: inline-block; position: relative; width: 21.253em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: -0.102em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: 20.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 1.565em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.805em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.951em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.19em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.284em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.857em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.43em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.003em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.096em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.669em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.242em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 13.336em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 13.909em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 14.482em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 15.003em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 15.576em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 16.148em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 16.721em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 17.242em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 17.815em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 18.388em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 18.961em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 19.482em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 20.055em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.711em, 1001.04em, 4.794em, -999.997em); top: -4.06em; left: 0em;"><span style="font-family: MathJax_Size2;">√</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.809em; border-left: 0px solid; width: 0px; height: 2.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mo>=</mo><msqrt><mo stretchy="false">(</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-24">R = \sqrt{(X_{sat}-X_{user})^2 + (Y_{sat}-Y_{user})^2 + (Z_{sat}-Z_{user})^2}</script>

<p>把这个公式代入上面PSR那个公式得到：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mi>S</mi><mi>R</mi><mo>=</mo><msqrt><mo stretchy=&quot;false&quot;>(</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></msqrt><mo>+</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&amp;#x22C5;</mo><mi>c</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-491" style="width: 35.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 29.69em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.836em, 1029.69em, 2.971em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-492"><span class="mi" id="MathJax-Span-493" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-494" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-495" style="font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-496" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="msqrt" id="MathJax-Span-497" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 22.294em; height: 0px;"><span style="position: absolute; clip: rect(2.971em, 1021.3em, 4.43em, -999.997em); top: -4.008em; left: 0.992em;"><span class="mrow" id="MathJax-Span-498"><span class="mo" id="MathJax-Span-499" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-500"><span style="display: inline-block; position: relative; width: 1.878em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-501" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-502"><span class="mrow" id="MathJax-Span-503"><span class="mi" id="MathJax-Span-504" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-505" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-506" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-507" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-508" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-509" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-510"><span class="mrow" id="MathJax-Span-511"><span class="mi" id="MathJax-Span-512" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-513" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-514" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-515" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-516"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-517" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-518" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-519" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-520" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="msubsup" id="MathJax-Span-521"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-522" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-523"><span class="mrow" id="MathJax-Span-524"><span class="mi" id="MathJax-Span-525" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-526" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-527" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-528" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-529" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.034em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-530" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-531"><span class="mrow" id="MathJax-Span-532"><span class="mi" id="MathJax-Span-533" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-534" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-535" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-536" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-537"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-538" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-539" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-540" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-541" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="msubsup" id="MathJax-Span-542"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-543" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-544"><span class="mrow" id="MathJax-Span-545"><span class="mi" id="MathJax-Span-546" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-547" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="mi" id="MathJax-Span-548" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-549" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-550" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-551" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-552"><span class="mrow" id="MathJax-Span-553"><span class="mi" id="MathJax-Span-554" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-555" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-556" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-557" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-558"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-559" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-560" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.596em, 1021.25em, 3.961em, -999.997em); top: -4.893em; left: 0.992em;"><span style="display: inline-block; position: relative; width: 21.253em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: -0.102em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: 20.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 1.565em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.138em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.711em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.232em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.805em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.378em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.951em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.471em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.044em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.617em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.19em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.284em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.857em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.43em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.003em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.523em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.096em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.669em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.242em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.763em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 13.336em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 13.909em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 14.482em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 15.003em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 15.576em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 16.148em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 16.721em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 17.242em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 17.815em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 18.388em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 18.961em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 19.482em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 20.055em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.711em, 1001.04em, 4.794em, -999.997em); top: -4.06em; left: 0em;"><span style="font-family: MathJax_Size2;">√</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-561" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-562" style="font-family: MathJax_Main; padding-left: 0.211em;">Δ</span><span class="msubsup" id="MathJax-Span-563"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-564" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-565" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-566" style="font-family: MathJax_Main; padding-left: 0.211em;">⋅</span><span class="mi" id="MathJax-Span-567" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">c</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.809em; border-left: 0px solid; width: 0px; height: 2.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mi>S</mi><mi>R</mi><mo>=</mo><msqrt><mo stretchy="false">(</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mo>⋅</mo><mi>c</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-25">PSR = \sqrt{(X_{sat}-X_{user})^2 + (Y_{sat}-Y_{user})^2 + (Z_{sat}-Z_{user})^2} + \Delta t_0 \cdot c</script>

<p>这是一颗卫星得到的公式，我们用4颗卫星就可以得到4个公式：</p>

<span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mi>S</mi><msub><mi>R</mi><mi>i</mi></msub><mo>=</mo><msqrt><mo stretchy=&quot;false&quot;>(</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></msqrt><mo>+</mo><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub><mo>&amp;#x22C5;</mo><mi>c</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-568" style="width: 36.878em; display: inline-block;"><span style="display: inline-block; position: relative; width: 30.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.836em, 1030.73em, 2.971em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-569"><span class="mi" id="MathJax-Span-570" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-571" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="msubsup" id="MathJax-Span-572"><span style="display: inline-block; position: relative; width: 1.096em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-573" style="font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.784em;"><span class="mi" id="MathJax-Span-574" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-575" style="font-family: MathJax_Main; padding-left: 0.263em;">=</span><span class="msqrt" id="MathJax-Span-576" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 22.971em; height: 0px;"><span style="position: absolute; clip: rect(2.971em, 1021.98em, 4.43em, -999.997em); top: -4.008em; left: 0.992em;"><span class="mrow" id="MathJax-Span-577"><span class="mo" id="MathJax-Span-578" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-579"><span style="display: inline-block; position: relative; width: 2.086em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-580" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-581"><span class="mrow" id="MathJax-Span-582"><span class="mi" id="MathJax-Span-583" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-584" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="msubsup" id="MathJax-Span-585"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-586" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.263em;"><span class="mi" id="MathJax-Span-587" style="font-size: 50%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-588" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-589" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-590" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-591"><span class="mrow" id="MathJax-Span-592"><span class="mi" id="MathJax-Span-593" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-594" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-595" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-596" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-597"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-598" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-599" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-600" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-601" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="msubsup" id="MathJax-Span-602"><span style="display: inline-block; position: relative; width: 1.826em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-603" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-604"><span class="mrow" id="MathJax-Span-605"><span class="mi" id="MathJax-Span-606" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-607" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="msubsup" id="MathJax-Span-608"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-609" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.263em;"><span class="mi" id="MathJax-Span-610" style="font-size: 50%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-611" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-612" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.034em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-613" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-614"><span class="mrow" id="MathJax-Span-615"><span class="mi" id="MathJax-Span-616" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-617" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-618" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-619" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-620"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-621" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-622" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-623" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mo" id="MathJax-Span-624" style="font-family: MathJax_Main; padding-left: 0.211em;">(</span><span class="msubsup" id="MathJax-Span-625"><span style="display: inline-block; position: relative; width: 1.93em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-626" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-627"><span class="mrow" id="MathJax-Span-628"><span class="mi" id="MathJax-Span-629" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-630" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="msubsup" id="MathJax-Span-631"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-632" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.263em;"><span class="mi" id="MathJax-Span-633" style="font-size: 50%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-634" style="font-family: MathJax_Main; padding-left: 0.211em;">−</span><span class="msubsup" id="MathJax-Span-635" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-636" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-637"><span class="mrow" id="MathJax-Span-638"><span class="mi" id="MathJax-Span-639" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-640" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-641" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-642" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-643"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.32em, 4.43em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-644" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mn" id="MathJax-Span-645" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.596em, 1021.93em, 3.961em, -999.997em); top: -4.893em; left: 0.992em;"><span style="display: inline-block; position: relative; width: 21.93em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: -0.102em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -4.008em; left: 21.201em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.419em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 0.992em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 1.565em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.086em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 2.659em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.18em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 3.753em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.273em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 4.846em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.367em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 5.94em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 6.461em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.034em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 7.555em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.128em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 8.701em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.221em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 9.794em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.315em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 10.888em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.409em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 11.982em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 12.503em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 13.076em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 13.596em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 14.169em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 14.69em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 15.263em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 15.836em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 16.357em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 16.93em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 17.451em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 18.023em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 18.544em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 19.117em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 19.638em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 20.211em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="font-family: MathJax_Main; position: absolute; top: -4.008em; left: 20.732em;">−<span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.711em, 1001.04em, 4.794em, -999.997em); top: -4.06em; left: 0em;"><span style="font-family: MathJax_Size2;">√</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-646" style="font-family: MathJax_Main; padding-left: 0.211em;">+</span><span class="mi" id="MathJax-Span-647" style="font-family: MathJax_Main; padding-left: 0.211em;">Δ</span><span class="msubsup" id="MathJax-Span-648"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-649" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-650" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-651" style="font-family: MathJax_Main; padding-left: 0.211em;">⋅</span><span class="mi" id="MathJax-Span-652" style="font-family: MathJax_Math-italic; padding-left: 0.211em;">c</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.809em; border-left: 0px solid; width: 0px; height: 2.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mi>S</mi><msub><mi>R</mi><mi>i</mi></msub><mo>=</mo><msqrt><mo stretchy="false">(</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>−</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>−</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt><mo>+</mo><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub><mo>⋅</mo><mi>c</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-26">PSR_i = \sqrt{(X_{sat_i}-X_{user})^2 + (Y_{sat_i}-Y_{user})^2 + (Z_{sat_i}-Z_{user})^2} + \Delta t_0 \cdot c</script>

<p>上式对于i=1~4成立，<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mi>S</mi><msub><mi>R</mi><mi>i</mi></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-653" style="width: 3.023em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.503em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.253em, 1002.5em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-654"><span class="mi" id="MathJax-Span-655" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.107em;"></span></span><span class="mi" id="MathJax-Span-656" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="msubsup" id="MathJax-Span-657"><span style="display: inline-block; position: relative; width: 1.096em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-658" style="font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.784em;"><span class="mi" id="MathJax-Span-659" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>S</mi><msub><mi>R</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-27">PSR_i</script>是已知的(测量行程时间乘以光速)，4颗卫星位置<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>,</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-660" style="width: 9.013em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.503em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1007.4em, 2.607em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-661"><span class="mo" id="MathJax-Span-662" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-663"><span style="display: inline-block; position: relative; width: 2.086em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-664" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-665"><span class="mrow" id="MathJax-Span-666"><span class="mi" id="MathJax-Span-667" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-668" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="msubsup" id="MathJax-Span-669"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-670" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.263em;"><span class="mi" id="MathJax-Span-671" style="font-size: 50%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-672" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-673" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 1.826em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-674" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-675"><span class="mrow" id="MathJax-Span-676"><span class="mi" id="MathJax-Span-677" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-678" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="msubsup" id="MathJax-Span-679"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-680" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.263em;"><span class="mi" id="MathJax-Span-681" style="font-size: 50%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-682" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-683" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 1.93em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-684" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-685"><span class="mrow" id="MathJax-Span-686"><span class="mi" id="MathJax-Span-687" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-688" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span class="msubsup" id="MathJax-Span-689"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-690" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.263em;"><span class="mi" id="MathJax-Span-691" style="font-size: 50%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-692" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo>,</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>s</mi><mi>a</mi><msub><mi>t</mi><mi>i</mi></msub></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-28">(X_{sat_i},Y_{sat_i},Z_{sat_i})</script>也是已知的，未知的是<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-693" style="width: 9.794em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.128em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1008.02em, 2.607em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-694"><span class="mo" id="MathJax-Span-695" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-696"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-697" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-698"><span class="mrow" id="MathJax-Span-699"><span class="mi" id="MathJax-Span-700" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-701" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-702" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-703" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-704" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-705" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 2.034em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-706" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-707"><span class="mrow" id="MathJax-Span-708"><span class="mi" id="MathJax-Span-709" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-710" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-711" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-712" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-713" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-714" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-715" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-716"><span class="mrow" id="MathJax-Span-717"><span class="mi" id="MathJax-Span-718" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-719" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-720" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-721" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-722" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-29">(X_{user}, Y_{user}, Z_{user})</script>和时差<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><msub><mi>t</mi><mn>0</mn></msub></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-723" style="width: 1.982em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.62em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-724"><span class="mi" id="MathJax-Span-725" style="font-family: MathJax_Main;">Δ</span><span class="msubsup" id="MathJax-Span-726"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-727" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-728" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">Δ</mi><msub><mi>t</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-30">\Delta t_0</script>。四个方程四个未知数，因此有唯一解。</p>

<p>有很多方法来求解上面的方程组，感兴趣的读者可以参考[<a href="#r_31">31</a><a name="rb_31"></a>][<a href="#r_32">32</a><a name="rb_32"></a>][<a href="#r_33">33</a><a name="rb_33"></a>][<a href="#r_34">34</a><a name="rb_34"></a>][<a href="#r_35">35</a><a name="rb_35"></a>]。</p>

<p>上面除了可以解出GPS接收器的位置<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-729" style="width: 9.794em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.128em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1008.02em, 2.607em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-730"><span class="mo" id="MathJax-Span-731" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-732"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.84em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-733" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.836em;"><span class="texatom" id="MathJax-Span-734"><span class="mrow" id="MathJax-Span-735"><span class="mi" id="MathJax-Span-736" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-737" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-738" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-739" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-740" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-741" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 2.034em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-742" style="font-family: MathJax_Math-italic;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.576em;"><span class="texatom" id="MathJax-Span-743"><span class="mrow" id="MathJax-Span-744"><span class="mi" id="MathJax-Span-745" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-746" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-747" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-748" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-749" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-750" style="padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-751" style="font-family: MathJax_Math-italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-752"><span class="mrow" id="MathJax-Span-753"><span class="mi" id="MathJax-Span-754" style="font-size: 70.7%; font-family: MathJax_Math-italic;">u</span><span class="mi" id="MathJax-Span-755" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span class="mi" id="MathJax-Span-756" style="font-size: 70.7%; font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-757" style="font-size: 70.7%; font-family: MathJax_Math-italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-758" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>X</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>,</mo><msub><mi>Z</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-31">(X_{user}, Y_{user}, Z_{user})</script>，还能计算GPS接收器和GPS卫星的时差，从而可以对GPS接收器的时钟进行校对。所以GPS全称是授时与测距导航系统/全球定位系统。</p>

<p>接下来的问题是怎么计算行程时间。但是在这之前，我们要先介绍一下GPS系统相关的一些知识。</p>

<h2 id="gps系统">GPS系统<a class="anchorjs-link " href="#gps系统" aria-label="Anchor link for: gps系统" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<h3 id="全系统描述">全系统描述<a class="anchorjs-link " href="#全系统描述" aria-label="Anchor link for: 全系统描述" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>GPS由三个部分组成，如下图所示：</p>

<p><a name="img37"><img src="/img/itp/37.jpg" alt=""></a>
<em>图：GPS的三个组成部分</em></p>

<ul>
  <li>空间部分
    <ul>
      <li>包括所以在轨工作的卫星</li>
    </ul>
  </li>
  <li>控制部分
    <ul>
      <li>所有与系统监控有关的地面站：主控站、监控站和地面控制站</li>
    </ul>
  </li>
  <li>用户部分
    <ul>
      <li>所有民用和军用用户</li>
    </ul>
  </li>
</ul>

<p>空间部分与用户部分的通信是单向的。地面控制站与卫星的通信是双向的。GPS是一种无源定位技术，GPS接收器并不需要(也不能，除非你破解了控制部分)往GPS卫星发送信号，所以网上有些北斗的支持者说使用GPS会泄露用户的信息是完全没有道理的。但GPS卫星确实可以给GPS接收器发送错误的定位信息，因此非美国的盟友把GPS用于军事目的会很危险。下面分别介绍这三个部分。</p>

<h3 id="空间部分">空间部分<a class="anchorjs-link " href="#空间部分" aria-label="Anchor link for: 空间部分" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>GPS的空间部分由多达32颗工作卫星组成，这些卫星在6个不同的轨道平面上围绕地球运转，如下图所示。这些卫星的轨道高度距地面20180km，与赤道的夹角为55°。任何一颗卫星均在12h内绕行一周。由于地球也在运转，卫星会在约24h(准确时间为23h 56min)后重返其地面上空的出发位置。</p>

<p><a name="img38"><img src="/img/itp/38.jpg" alt=""></a>
<em>图：GPS卫星在6个轨道平面上绕地球运转</em></p>

<p>通过精巧的安排这些卫星的位置，GPS系统可以保证在全球任何地方的和任何时候，GPS接收器至少可以收到4颗卫星的信号。当然不能是有信号遮挡的地方，比如隧道这些地方。</p>

<p>所有的GPS卫星均使用星载原子钟来保持同步信号，这些信号以相同的频率(1575.42MHz)发送。地面上接收到的最小信号强度为-158～-160dBW。根据规定，最大信号强度约为-153dBW。</p>

<p>卫星以50bit/s的速率发送以下信息(导航电文)</p>

<ul>
  <li>卫星时和同步信号</li>
  <li>精确轨道数据(星历)</li>
  <li>用于确定精确卫星时的时间修正信息</li>
  <li>所有卫星的近似轨道数据(年历)</li>
  <li>用于计算信号发送时间的校正信号</li>
  <li>电离层数据</li>
  <li>卫星的工作状态(健康状况)信息</li>
</ul>

<p>发送完所有上述信息所需的时间为12.5min。通过使用导航电文，接收机能够确定每个卫星信号的发送时间以及在发送时卫星的精确位置。每颗GPS卫星都会发送为其分配的唯一签名。签名由1023个0和1组成的伪随机噪声(PRN)码，广播历时1ms并连续重发，如下图所示：</p>

<p><a name="img39"><img src="/img/itp/39.jpg" alt=""></a>
<em>图：伪随机噪声(PRN)</em></p>

<p>该签名码供接收机用于以下两方面：</p>

<ul>
  <li>通过唯一的签名模式可识别出信号是由哪颗卫星发送的</li>
  <li>信号行程时间测量</li>
</ul>

<p>在每颗卫星上均载有4台高精度原子钟，由其中一台原子钟的共振频率生成以下工作所需的时间脉冲和频率：</p>

<ul>
  <li>50Hz数据脉冲</li>
  <li>C/A(粗捕获)码(频率为1.023MHz的PRN码广播)，该码采用异或操作调制数据并2MHz带宽发送数据</li>
  <li>民用L1载波频率(1575.42MHz)</li>
</ul>

<p><a name="img40"><img src="/img/itp/40.jpg" alt=""></a>
<em>图：简化的卫星框图</em></p>

<p><a name="img41"><img src="/img/itp/41.jpg" alt=""></a>
<em>图：GPS信号的数据结构</em></p>

<p>上图最上面是50bit/s的导航电文，包含了用于定位的重要信息。第二行是第18颗卫星的PRN，不同卫星的PRN是不相同的，我们后面会用这个信息来识别信号是哪个卫星发过来的，而且导航电文部分有时间信息，因此我们可以精确的知道PRN的每一个高低电平位置的时间。知道时间很重要因为这是计算行程时间的关键，后面还会讲具体怎么计算行程时间。第三行是把上面两个信号用异或操作得到的结果，用专业词汇上来讲这是一种”扩频”技术，如果没有相关知识我们可以这样的简单理解：第三行的信号如果用第二行的信号再异或就可以”解扩”得到原始的第一行的50bit/s的导航电文。第四行是用于发送信号的L1载波，第五行就是使用二进制相移键控(BPSK)调制的技术把第三行的数字信号”搬到”1575.42MHz的L1载波上。</p>

<p>而GPS接收器收到第五行的信号后首先会解调，得到第三行的信号，然后通过相关性搜索(或者频域的搜索)得到这个信号是哪个卫星发过来的，然后用这个卫星的PRN(相关性搜索还能”对齐”，其实就知道了信号的发送时间)异或(解扩)这个信号得到导航电文。相关性搜索会用到PRN码一个很重要的特性：同一个卫星的PRN码自相关性最好，但是不同卫星的码和码之间的互相关性就会很差。</p>

<p>假设有个1023码片的序列，随机序列，每个码片采样一个点，本地复现一个一摸一样的码片，点和点之间去做乘，然后做累加，如果完全对准的情况下 1<em>1=1，-1</em>-1=1，累加之后就是1023，这是最大的值。你尝试移动它，本地从第二个码片开始，输入的码片从第一个开始，在做点对点相乘，再做累加，因为序列是随机的，所以累积出来的值趋于0，这样互相关性就趋于0，就能区分不同的卫星。</p>

<h3 id="扩频和cdma">扩频和CDMA<a class="anchorjs-link " href="#扩频和cdma" aria-label="Anchor link for: 扩频和cdma" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>不了解通信原理的读者可能无法明白上面说的是什么，这里简单的介绍一下扩频和CDMA的知识，更多内容请参考[<a href="#r_36">36</a><a name="rb_36"></a>][<a href="#r_37">37</a><a name="rb_37"></a>]。如果对这些内容不感兴趣，可以跳过。</p>

<p>CDMA更像是鸡尾酒宴会，大家可以在一个大房间里进行交谈。既然都是在一个屋子里，如果都是用中文说话，那麻烦就大了，你会不断地被与你无关的人说的话所干扰，甚至搞得你无法和你想交流的对象进行正常的交流。这时候如果大家所采用的编码方式不同，比如你用中文，张三用英语，李四用意大利语，王五用西班牙语，情况就会好得多。你的对家用中文作为”扩频码”和你说话，尽管背景噪声很嘈杂，但是你还是可以很好地分辨出他的声音，OK，咱可以正常交流。这时候张三说的英语的声波过来干扰了，怎么办呢，这时候你的大脑就相当于处理机，它就会这么反应：”对不起，哥们，英语咱一窍不通，您的扩频码咱不认识，咱只当是背景噪声直接过滤了。”</p>

<p>请注意，扩频码有一个特点，那就是必须正交。正交在数学里的概念就是完完全全不相关，也即两个信号的乘积在某个区间内积分为零。换句话说，就是你这编码和编码之间要没啥相关性，英语和汉语就适合做扩频码，因为英语和汉语没啥相关性，很容易就可以区分开来(其实这句话并不完全正确，汉语里有很多舶来品，比如沙发——sofa，好莱坞——Hollywood)。但是湖北话和湖南话做扩频码就不合适了，重叠部分太多了，一起说会干扰得一塌糊涂。</p>

<p>说到这里，相信大家也明白扩频码大致是怎么回事了。但是估计很快就有人会有疑问，在”鸡尾酒宴会”中，要找到两两正交的扩频码是很简单的事情，英语和汉语、韩语与日语，差别都非常大，几乎可以理解为完全没有什么相关性。而我们机器所使用的都是”0”和”1”(按习惯分别用电平值”+1”和”-1”表示)，你果真能找到那么多没有交集、完全不相关的序列吗？</p>

<p>在这里，我们得首先搞清楚对于两个序列，什么叫做不相关，定义很简单，两个序列乘的结果加起来等于0就叫做不相关。比如说{+1, -1}和{+1, +1}两个序列，相乘的结果就是1×1+1×(-1)=0，等于0就说明你们俩没关系，不来电，换成数学的话来说就叫做不相关。</p>

<p>我们很容易就能推出一大堆这样的序列，比如{+1, +1, +1, +1}和{+1, +1, -1, -1}，乃至可以按下图所示的码树一直推演下去。大家不难得出，每个纵列的码序列相乘的结果都是0，也就是说是完全不相关的。我们可以把每个序列当成一门语言，序列和序列之间是相互正交的，就好比语言和语言之间是正交的一样。那么只要把原始数据用这个序列来编码，就可以让不同人的原始数据进行正交。我们把用这个序列来对原始数据进行编码的过程叫做扩频，而这个序列就叫做扩频码。</p>

<p><a name="img42"><img src="/img/itp/42.jpg" alt=""></a>
<em>图：扩频码的生成</em></p>

<p>3大3G标准的扩频码都产自Walsh序列，上图就是Walsh序列生成的一简单的演示。在cdma2000中，扩频码也称为Walsh码，而在WCDMA和TD-SCDMA中则称为OVSF(Orthogonal Variable Spreading Factor，正交可变扩频因子)码，其实两者来源都一样，只是生成方式略有不同而已。</p>

<p>其实到这里，我们只是说明了存在这样一系列的序列，它们之间就像英语和中文一样，没有什么相关性，那么不同的用户采用不同的序列来编码，就可以互相不干扰。跟”扩频”两个字好像没有关系，一个”扩”字，一个”频”字，在本节中暂时还没有看到。另外，对于一个原始的话音信号，到底是怎样和这些序列进行运算，从而能实现和其他用户的话音信号互不干扰的过程，也没有举例，没有举例的话，大家的印象也就不可能很深刻。别急，以上两个问题，我们马上就要讲到。</p>

<p>所谓”扩频”，就是让话音信号序列和比它速率高得多的扩频序列相乘，从而延展它的频带。我们举一个例子来说明这个问题。假设我原来的话音信号是”10”，那么它和一串”1101100110100011”的码在发送端手机进行扩频，然后在接收端手机进行解扩，这个过程是怎样的？在这里说明一下，下图中的运算是模二加运算。</p>

<p><a name="img43"><img src="/img/itp/43.jpg" alt=""></a>
<em>图：扩频与解扩的过程</em></p>

<p>上图很好地说明了一个信号从发送端扩频到接收端解扩还原信号的过程，假设原始话音信号速率是R，那么它扩频后的速率就达到了8R，也就是频率是原来的8倍，这个就叫做”扩频”。扩频完成了，信号也开始在空中发送了，然而一个基站下是不止一个手机的，手机1的信号跑去干扰手机2是很正常的，如下图所示。由于手机1和手机2使用的频率是完全相同的，如果扩频码不能有效区分两个信号，那么同频干扰的威力是十分可怕的。</p>

<p><a name="img44"><img src="/img/itp/44.jpg" alt=""></a>
<em>图：手机1的信号去干扰手机2</em></p>

<p>我们在上面把不同的扩频码比喻成不同的语言，信誓旦旦说它们是不会互相干扰的，是不是真的是这样，有待我们来验证。我们把上图中接收端的解扩码换成W2，发送信号还是用上图所示圆圈中的那个发送信号，这样就变成了手机2接收了基站发给手机1的信号，看看手机2是怎么把它过滤掉的，如图所示：</p>

<p><a name="img45"><img src="/img/itp/45.jpg" alt=""></a>
<em>图：手机2处理干扰的过程</em></p>

<p>从上图看好像干扰还没有消掉，形成了一串”1100110000110011”的序列，其实这种理解有误。解扩之后，信号又变成了低频信号，只应该有两个码元，同一个码元内高低电平的变化会进行积分，积分的值才是最终的值。在第一个周期内，信号为”11001100”，换算成高低电平也就是”-1, -1, +1, +1, -1, -1, +1, +1”，把这8个值加起来等于多少？0！也就是说，其他手机发过来的信号，由于扩频码正交的特性，都可以过滤掉。</p>

<p>上述就是CDMA的工作原理。用扩频码对原来的低频信号进行扩频，使之在整个频段上工作，由于扩频码的正交性，不同的用户可以用不同的扩频码来进行区分，这就是CDMA(Code Division Multiple Access，码分多址)这个词的来历。</p>

<p>Walsh码的正交性有个前提：码必须是同步的，否则正交性无从谈起。如何实现码同步呢？一般使用PN码来实现。</p>

<p><strong>PN码简介</strong></p>

<p>PN码，即伪随机码。</p>

<p>m序列是由n级线性移位寄存器产生的周期为2n−1的码序列，是最长线性移位寄存器序列的简称。m序列具有很好的自相关性，一般使用m序列作为PN码。以n=3为例，m序列的产生电路如下图所示。</p>

<p><a name="img46"><img src="/img/itp/46.jpg" alt=""></a>
<em>图：m序列产生电路</em></p>

<p>假定寄存器的初始状态为：D1=0，D2=0，D3=1，输出a1=1。第1个时钟脉冲到来后，状态演变为：D1=1，D2=0，D3=0，输出a2=0。第2个时钟脉冲到来后，状态演变为：D1=0，D2=1，D3=0，输出a3=1。依次节拍状态如下表所示。</p>

<p><a name="img47"><img src="/img/itp/47.jpg" alt=""></a>
<em>表：寄存器状态</em></p>

<p>第7个状态又回到移位寄存器的初始状态，并不断循环。</p>

<p>很明显，该m序列的周期为23−1=7，一个周期的序列为：1011100。</p>

<p><strong>同步原理</strong></p>

<p>m序列具有很好的自相关特性，可以用来实现同步。自相关运算过程如下：</p>

<ul>
  <li>本地产生一个m序列。</li>
  <li>移动1位，与接收到的m序列逐位相乘再求和。</li>
  <li>移动2位，与接收到的m序列逐位相乘再求和。</li>
  <li>依此类推，即可得到自相关运算结果。</li>
</ul>

<p>注：计算之前要将0映射为+1，将1映射为-1。</p>

<p>接着n=3的m序列的例子。如果本地产生的序列与接收序列刚好对齐，逐位相乘再求和的结果为7，如下图所示。</p>

<p><a name="img48"><img src="/img/itp/48.jpg" alt=""></a>
<em>图：本地序列与接收序列对齐</em></p>

<p>如果本地产生的序列与接收序列错开1位，逐位相乘再求和结果为-1，如下图所示：</p>

<p><a name="img49"><img src="/img/itp/49.jpg" alt=""></a>
<em>图：本地序列与接收序列错开1位</em></p>

<p>如果本地产生的序列与接收序列错开2位，逐位相乘再求和结果为-1，如下图所示：</p>

<p><a name="img50"><img src="/img/itp/50.jpg" alt=""></a>
<em>图：本地序列与接收序列错开2位</em></p>

<p>依此类推。将所有的计算结果画到一张图中，如下图所示：</p>

<p><a name="img51"><img src="/img/itp/51.jpg" alt=""></a>
<em>图：自相关计算结果</em></p>

<p>可以发现如下规律：</p>

<ul>
  <li>如果本地产生的序列与接收到的序列刚好对齐，逐位相乘再求和的结果为：7。</li>
  <li>如果本地产生的序列与接收到的序列没有对齐，逐位相乘再求和的结果为：-1。</li>
  <li>根据m序列的自相关性，很容易实现m序列的同步，有了这个做基础，Walsh码的同步就不成问题了。</li>
</ul>

<h3 id="控制部分">控制部分<a class="anchorjs-link " href="#控制部分" aria-label="Anchor link for: 控制部分" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>GPS卫星控制部分(操作控制系统，OCS)由位于科罗拉多州的主控站、5个监控站(每个站均配备原子钟并分布在全球赤道附近)和3个向卫星发送信息的地面控制站组成。控制部分最重要的任务有：</p>

<ul>
  <li>观测卫星运动并计算轨道数据(星历)</li>
  <li>监视卫星时钟并预测其运行情况</li>
  <li>对星上时间进行同步</li>
  <li>转发收自卫星的精确轨道数据</li>
  <li>转发所有卫星的近似轨道数据(年历)</li>
  <li>转发其他信息，其中包括卫星健康状况、时钟误差等</li>
</ul>

<p>控制部分还负责监视人为信号失真(选择可用性，SA)，以降低供民用使用时的系统定位精度。在2000年5月之前，美国国防部出于政治和战略考虑故意降低系统精度。其中包括使用随机误差信号调制部分卫星的时间信号，或者伪造星历。2000年5月初，SA系统失效，为此定位精度从100m左右猛然提高到13m。</p>

<p>在2000年5月2日之后，只在必要时才激活地区性或全球性人为失真(SA)。这一原则既保留了在特定重点地区降级或限制GPS使用的可能性，又使在这些地区以外的系统精度不受限制。实际上还未曾听说有重新激活SA系统的事例。</p>

<p>美国国防部于2007年9月18日宣布，下一代GPS卫星(GPSⅢ)的卫星导航信号将不再做人工失真处理。这一代卫星也不再考虑信号失真的技术可行性。由于美国政府未向GPSⅢ卫星加入信号失真功能，并克制实行现有的SA措施，这将确保GPS对于民用用户的可靠性。</p>

<h3 id="用户部分">用户部分<a class="anchorjs-link " href="#用户部分" aria-label="Anchor link for: 用户部分" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>GPS卫星发送的无线电信号到达地面上的接收机约需67ms。由于信号以恒定速度(光速C)行进，其行程时间可确定卫星与用户之间的准确距离。</p>

<p>接收机会收到4个不同的信号，这些信号来自4颗卫星，每个信号都具有相同的结构。使接收机生成的信号与收自卫星的信号同步，将测得的4颗卫星的信号时间偏移Δt作为时标，如下图所示。然后将测得的所有4颗卫星信号的时间偏移Δt用来确定精确的信号行程时间。这些时间偏移乘以光速得到的距离称为伪距。</p>

<p><a name="img52"><img src="/img/itp/52.jpg" alt=""></a>
<em>图：测量信号行程时间</em></p>

<p>为确定用户的位置，需要与4颗卫星进行无线电通信。与这些卫星之间的距离通过信号的行程时间确定。然后接收机根据伪距和这4颗卫星的已知位置计算出用户的经度λ、纬度φ、高程h和时间t。这个过程前面已经介绍过了(只是求出WGS-84笛卡尔坐标，但是转化成经纬度也很容易)。</p>

<p>上文提到，所有的GPS卫星以相同的频率发送信号，但使用不同的C/A码。通过相关性来进行卫星辨识和信号恢复。由于接收机能够识别所有目前使用的C/A码，通过将所有已知编码与所有接收到的卫星信号进行系统的移位和比较，最终会找到完全匹配者(也就是说，相关因子CF为1)，并得到相关点(见下图)。相关点用于测量实际的信号行程时间以及辨识卫星。</p>

<p><a name="img53"><img src="/img/itp/53.jpg" alt=""></a>
<em>图：30位校准处理图示</em></p>

<p>由于多普勒效应(卫星和接收机处于相对运动状态)的影响，发送的信号在接收点的频移可能会达到±5000Hz。因此，信号行程时间的确定和数据恢复不仅要与所有可能相移的所有编码相关，还要辨识正确的相位载波频率。此外，本地基准频率可能也有偏差，这就加大了需要搜索的频率宽度。本地振荡器1ppm的频率误差相当于1.575kHz的多普勒频移。下图表示多普勒频移在±6kHz范围内时的本地振荡器偏差情况。通过将所有编码和载波频率与收到的卫星信号进行系统的移位和比较，就会找到一个完全吻合的点(即相关因子为1)。</p>

<p><a name="img54"><img src="/img/itp/54.jpg" alt=""></a>
<em>图：在编码和载波频率域内搜索最大相关点</em></p>

<h3 id="gps导航电文">GPS导航电文<a class="anchorjs-link " href="#gps导航电文" aria-label="Anchor link for: gps导航电文" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>本节内容描述GPS导航电文的结构，不感兴趣的读者可以跳过。</p>

<p>GPS导航电文是以50bit/s发送的连续数据流。每颗卫星都向地球转发以下信息：</p>

<ul>
  <li>系统时间和时钟修正值</li>
  <li>卫星自身的高精度轨道数据(星历)</li>
  <li>所有其他卫星的近似轨道数据(年历)</li>
  <li>系统健康状况等</li>
</ul>

<p>导航电文对于计算卫星的当前位置以及确定信号行程时间是必不可少的。数据流被调制成各卫星的HF载波。数据按照称为帧或页的逻辑分组单元发送。各帧的长度为1500bits，发送需要花费30s。一帧又被分为5个子帧。各子帧的长度为300bits，发送需要花费6s。发送一个完整的年历需要25个不同的帧。因此整个年历的发送时间为12.5min。除非配有GPS增强器(参见后文)，否则GPS接收机必须收集到至少一个完整的年历才能计算初始位置。</p>

<h4 id="导航电文的结构">导航电文的结构<a class="anchorjs-link " href="#导航电文的结构" aria-label="Anchor link for: 导航电文的结构" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h4>

<p>一帧的长度为1500bits，发送需要花费30s。这1500bits的信息被分为5个子帧，每个子帧300bits(发送需花费6s)。每个子帧由10个字(word)组成，每个字含30bits。子帧以一个遥测字(TLM)和一个转换字(HOW)开头。一个完整的导航电文由25帧(页)组成。下图给出了导航电文结构的图示。</p>

<p><a name="img55"><img src="/img/itp/55.jpg" alt=""></a>
<em>图：导航电文的结构</em></p>

<h4 id="子帧包含的信息">子帧包含的信息<a class="anchorjs-link " href="#子帧包含的信息" aria-label="Anchor link for: 子帧包含的信息" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h4>
<p>每一帧被分为5个子帧，每个子帧用于传送不同的信息。</p>

<p>子帧1包含了发送信号的卫星的时间值，其中包括用于修正信号传输延迟和星载时钟时间的参数，以及卫星健康状况信息和卫星位置精度的估算值。子帧1还用于提供传送10bits GPS星期数(10bits可表示从0至1023的数值)。GPS时始于1980年1月6日星期日0时0分0秒。每经过1024个星期后，星期数重新从0开始。该事件称为“星期归零”。</p>

<p>子帧2和3包含了发送信号的卫星的星历数据。这些数据提供了非常精确的卫星轨道信息。</p>

<p>子帧4包含了编号为25～32的卫星的年历数据(注意：每个子帧只能用于发送一颗卫星的数据)、GPS时与协调世界时之间的差异(即：闰秒或UTC偏差)以及与电离层导致的测量误差有关的信息。</p>

<p>子帧5包含了编号为1～24的卫星的星历数据(注意：每个子帧只能用于发送一颗卫星的数据)。所有的25页信息与编号为1～24的卫星的健康状况信息一同发送。</p>

<h4 id="遥测字tlm与转换字how">遥测字(TLM)与转换字(HOW)<a class="anchorjs-link " href="#遥测字tlm与转换字how" aria-label="Anchor link for: 遥测字tlm与转换字how" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h4>

<p>每个单帧的首字是遥测字(TLM)，它包含了一个8bits长的前置序列(10001011)用于同步，接下来是为授权用户保留的16bits。与所有的字一样，遥测字的最后6bits为奇偶校验位。</p>

<p>转换字(HOW)紧跟在每个子帧的遥测字后面。转换字长度为17bits(17bits可表示从0至131071的数值)，其中包含了下一子帧的起始时间，以星期时(TOW)发送。星期时从GPS星期的起点数值0开始(过渡期为星期六23时59分59秒至星期日0时0分0秒)，并且该数值每6s加1，由于每周有604800s，计数在归零之前从0累加至100799。每隔6s将一个标志加入到数据流中与转换字一同发送，以便与P码同步。第20～第22bit用于转换字，以标识刚发送完的子帧。</p>

<h4 id="25页的细分">25页的细分<a class="anchorjs-link " href="#25页的细分" aria-label="Anchor link for: 25页的细分" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h4>

<p>完整的导航电文需要25页，发送至少需要12.5min。一页或一帧分为5个子帧。所有25页的子帧1～3的信息内容均相同。这意味着接收机每30s就能获得发送卫星的完整时钟值和星历数据。子帧4与子帧5之间的差异仅在于发送信息的组织方式。</p>

<p>对于子帧4，第2、3、4、5、7、8、9和10页转发编号为25～32的卫星的年历数据。在所有情况下，每页只用来传送一颗卫星的年历数据。第18页用来传送对电离层闪烁的修正测量值，以及协调世界时与GPS时之间的差异。第25页包含了所有32颗卫星的配置信息(即分区关系)以及编号为25～32的卫星的健康状况。</p>

<p>对于子帧5，第1至第24页转发编号为1～24的卫星的年历数据。在所有情况下，每页只用来传送一颗卫星的年历数据。第25页用来传输编号为1～24的卫星的健康状况信息以及初始年历时间。</p>

<h3 id="gps现代化">GPS现代化<a class="anchorjs-link " href="#gps现代化" aria-label="Anchor link for: gps现代化" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>自1978年GPS投入使用以来，所有的卫星都向地面发送以下三种信号：</p>

<ul>
  <li>在L1频率(1575.42MHz)上
    <ul>
      <li>一路民用信号(使用C/A信号、BPSK(1)调制的SPS服务)，一路军用信号(使用P(Y)信号、BPSK(10)调制的PPS服务)；</li>
    </ul>
  </li>
  <li>在L2频率(1227.60MHz)上
    <ul>
      <li>第二路军用P(Y)信号。</li>
    </ul>
  </li>
</ul>

<p>美国国防部计划逐步改进GPS信号结构。对于民用而言，引入第二个和第三个频率是非常重要的，如果在定位时可以使用更多的频率，就能补偿甚至消除电离层对信号行程时间的影响。由于在电离层中的传输速度C取决于频率，因此实现这种补偿是可能的。除了两路新信号，GPS现代化还增强了民用用户的信号强度并提高了军事应用能力。因此后来陆续出现了L3、L4和L5的频率信号，其中L5是民用的。下面是目前为止GPS的信号频率汇总：</p>

<p><a name="img64"><img src="/img/itp/64.png" alt=""></a>
<em>图：GPS frequency overview 来自<a href="https://en.wikipedia.org/wiki/Global_Positioning_System">wikipedia</a></em></p>

<h2 id="计算gps卫星的位置">计算GPS卫星的位置<a class="anchorjs-link " href="#计算gps卫星的位置" aria-label="Anchor link for: 计算gps卫星的位置" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>前面我们在求解GPS接收器的位置时假设我们知道发射信号时的GPS卫星的准确位置，但是这个位置又是怎么知道的呢？根据前面GPS导航电文的介绍，读者可能也会猜测出来这个位置信息就在星历里。没错，星历里包含了这颗卫星最近4个小时的准确轨道信息。那么具体怎么通过星历计算GPS在WGS-84笛卡尔坐标系统的位置呢？我们这里就不介绍了，感兴趣的读者可以参考[<a href="#r_38">38</a><a name="rb_38"></a>]或者[<a href="#r_34">34</a><a name="rb_34"></a>]。</p>

<h2 id="计算行程时间">计算行程时间<a class="anchorjs-link " href="#计算行程时间" aria-label="Anchor link for: 计算行程时间" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>现在我们回到计算行程时间这个问题，解决这个问题之后整个GPS定位的过程就比较完整了。我们再来回顾一下重要的几个时钟系统。</p>

<ul>
  <li>
    <p>UTC，协调世界时。</p>
  </li>
  <li>GPS时，用于GPS系统的时间系统。
    <ul>
      <li>GPS时与协调世界时的差别在于所有累计的秒数(2008年相差14s)以及低于1μs的误差。GPS时与协调世界时之差以及该差值的当前特性通过导航电文(子帧4，第18页)发送。</li>
    </ul>
  </li>
  <li>星时，每颗卫星的星上时间。
    <ul>
      <li>卫星时与GPS时的具体差值以及该差值的当前特性通过导航电文(子帧1，第1至25页)发送。</li>
    </ul>
  </li>
  <li>接收机时，GPS接收机的内部时间。
    <ul>
      <li>该时间通常由内部的石英晶体振荡器确定，有别于GPS时和/或协调世界时。该差值<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>t</mi><mn>0</mn></msub></math>" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-759" style="width: 0.94em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.78em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-760"><span class="msubsup" id="MathJax-Span-761"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.232em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-762" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-763" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-32">t_0</script>在GPS接收机开始工作时未知，但经过数次测量后可以降低。</li>
    </ul>
  </li>
</ul>

<h3 id="确定行程时间的具体方法">确定行程时间的具体方法<a class="anchorjs-link " href="#确定行程时间的具体方法" aria-label="Anchor link for: 确定行程时间的具体方法" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>以下部分讨论了确定信号行程时间所需的方法。为了保留该方法的全貌，对该过程的描述做了大量简化。行程时间用于计算自卫星至接收机的距离(R)。</p>

<p><strong>第1步：通过相关性确定信号到达时间</strong></p>

<p>GPS接收机会接收到来自1颗或多颗卫星的信号。每个信号都具有相关性。在此描述的相关处理是针对单个信号的，但所有的卫星信号都必须进行同样处理。由于接收机在接收信号时发射信号的卫星数量(x)是未知的，接收机会生成各种PRN码(x＝1～32)。将这些编码按时间平移，直至某个PRN码与卫星信号x的时间和信号形式达到最大相关所需的时间平移和接收机时标(如毫秒间隔)确定了所观测卫星信号的到达时间(时间以接收机时给出)。</p>

<p><a name="img56"><img src="/img/itp/56.jpg" alt=""></a>
<em>图：搜索最大相关</em></p>

<p><a name="img57"><img src="/img/itp/57.jpg" alt=""></a>
<em>图：确定卫星信号到达时间</em></p>

<p>注意：我们的GPS接收机接受到的信号是连续的。我们把到达时间”定”为收到信号的第一个PRN的开始时刻，因为PRN是1ms发送1023个bit(1.023MHz)，我们收到的第一个bit可能是这1023个中的任何一个，如果我们收到的不是第一个而是第i个，那么我们要往后走(1023-i)个bit。这样我们的”收到”时间就是PRN的第1个bit，这样便于计算其发送时间。所以上图中信号的到达时间的精确值为2h25min35.7293s。</p>

<p><strong>第2步：对数据和/或导航电文进行重构</strong></p>

<p>搜索并保持最大相关，即卫星信号与接收机生成的PRN序列连续同步。将时移的PRN序列(C/A码)与卫星信号关联，由此可重构导航电文，如下图所示：</p>

<p><a name="img58"><img src="/img/itp/58.jpg" alt=""></a>
<em>图：重构导航电文</em></p>

<p><strong>第3步：确定发送时间</strong></p>

<p>导航电文的每个子帧以8bits的报文头开始。遥测字(TLM)报文头的结构定义为10001011的模式，该比特序列每6s重复一次。在导航电文带有17bits星期时(TOW)电文的首个子帧的转换字(HOW)中，包含有该报文头的发送时间(以卫星时表示)。</p>

<p><a name="img59"><img src="/img/itp/59.jpg" alt=""></a>
<em>图：重构导航电文的遥测字(TLM)和转换字(HOW)</em></p>

<p>此时GPS接收机开始在导航电文中搜索10001011模式。由于该模式也可能在导航电文的其他部分出现，因此还必须符合其他参数条件：</p>

<ul>
  <li>两个逻辑0必须出现在假定的报文头之后第51比特和第52比特(转换字的最后两个奇偶校验位设为0)。</li>
  <li>从假定的报文头之后第16比特开始的奇偶校验位(遥测字的奇偶校验位)必须正确。</li>
  <li>假定的报文头之前的两比特必须为0(子帧结束位置的每个字最后的奇偶校验位设为0)。</li>
  <li>从假定的报文头之后第22比特开始的遥测字电文(17bits)中给出的时间必须大致正确。由于每6s反复提供时间信息，因此对接收机的时间测量精度要求不必太高。</li>
  <li>下一个子帧的报文头必须正好在假定的报文头之后第300比特开始。</li>
</ul>

<p>如果系统确认达到上述条件之一，则不必再比较所有的约束条件。报文头第一比特的发送时间位于上一帧导航电文的遥测字中。该时间以卫星时给出，但由于该信息包含在导航电文中，可将其转换为GPS时。</p>

<p>上面的描述比较细节，但是核心就是怎么找到信号的发送时间。通过前面两步之后，我们可以保持接收到的信号与接收机生成的PRN序列连续同步，从而持续把50bit/s的导航电文解码出来。而且导航电文每过6s会出现10001011开头的遥测字(TLM)，所以我们在同步后一直往后搜索在6s内总能找到一个时刻，这个时刻有信号的GPS发送时间，当然我们也有接收器的当前时间，从而可以计算出行程时间。</p>

<h2 id="误差分析与精度因子">误差分析与精度因子<a class="anchorjs-link " href="#误差分析与精度因子" aria-label="Anchor link for: 误差分析与精度因子" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<h3 id="误差主要原因">误差主要原因<a class="anchorjs-link " href="#误差主要原因" aria-label="Anchor link for: 误差主要原因" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>到目前为止，尚未考虑计算中的误差量。在GNSS技术中，总误差可能会由各种原因造成：</p>

<ul>
  <li>卫星时钟：尽管每颗GPS卫星都配有4台高精度原子钟，但10ns的时间误差足以产生相当于3m的定位误差。</li>
  <li>卫星轨道：一般来说，卫星位置的真实值只能做到1～5m的精度。</li>
  <li>光速：信号以光速从卫星出发。
    <ul>
      <li>它们在穿越电离层和对流层时会减慢，因此不能将其视为常数。这种与标准光速的偏差会给计算位置带来误差。</li>
    </ul>
  </li>
  <li>信号行程时间误差测量
    <ul>
      <li>全球卫星导航系统接收机只能以有限的精度确定输入的卫星信号时间。</li>
    </ul>
  </li>
  <li>多径效应：由于接收到被反射的信号，误差量会进一步加大。</li>
  <li>卫星几何形态
    <ul>
      <li>如果用于测量的4颗参考卫星较为接近，确定位置会更加困难。卫星几何形态对测量精度的影响被称为DOP(精度因子，Dilution Of Precision的缩写)。</li>
    </ul>
  </li>
</ul>

<p>测量误差的成因有多种。下表给出了不同误差源所导致的水平位置误差范围。</p>

<p><a name="img60"><img src="/img/itp/60.jpg" alt=""></a>
<em>图：误差原因</em></p>

<h3 id="dop">DOP<a class="anchorjs-link " href="#dop" aria-label="Anchor link for: dop" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>GPS导航的定位精度一方面取决于各个伪距测量，另一方面取决于所用卫星的几何构型。该构型可用一个标量来表示，在导航领域中称为DOP(精度因子)。DOP值描述了对精度的削弱程度，因而它是星座与不精确度之间相关性的因子或度量。如果DOP值较高(例如，所有可见的卫星彼此之间比较接近)，则预期的不精确度也会升高。</p>

<p>卫星几何形态对不精确度的影响如下图所示。当两颗卫星之间的间距较大时(左图)，定位误差(红色区域)较小。如果它们彼此较为接近(右图)，则误差区域较大。这一原理适用于需确定的位置存在不确定性时，称为距离误差(R－E：黄色和蓝色区域)，对两颗卫星同样起作用。R(R1和R2)代表测得的从卫星到用户的距离(伪距)。</p>

<p><a name="img61"><img src="/img/itp/61.jpg" alt=""></a>
<em>图：以距离R1和R2为半径作圆，交点处的夹角越平坦，DOP值越高</em></p>

<h2 id="减小误差">减小误差<a class="anchorjs-link " href="#减小误差" aria-label="Anchor link for: 减小误差" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>前面我们介绍GPS定位的原理，但是普通的GPS定位的精度一般是10米左右，不能满足V2X到车道(1.5米)的需求。</p>

<h3 id="gps误差的原因">GPS误差的原因<a class="anchorjs-link " href="#gps误差的原因" aria-label="Anchor link for: gps误差的原因" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<ul>
  <li>星历数据
    <ul>
      <li>在发送信号时卫星位置精度一般只能达到1～5m。</li>
    </ul>
  </li>
  <li>卫星时钟
    <ul>
      <li>尽管每颗卫星都携带了4台原子钟，但时基会有偏差。对于稳定性为10- 13的振荡器，其时间误差可达10ns。10ns的时间误差产生的距离误差约为3m。</li>
    </ul>
  </li>
  <li>电离层影响
    <ul>
      <li>电离层是位于距地面60～1000km之间的大气层。电离层中的气体分子被严重电离。电离主要是由于太阳辐射所致(仅发生在白天！)。信号以光速从卫星发出穿越真空。在电离层内，这些信号的速度减慢，因此不能再被视为常数。电离的程度取决于时间和地点，在白天及赤道地区最为严重。如果电离强度已知，可在一定程度上通过地理修正模型进行补偿。此外，如果信号速度的改变与频率相关，还可通过使用双频GPS接收机进行额外修正。</li>
    </ul>
  </li>
  <li>对流层影响
    <ul>
      <li>对流层是位于距地面0～15km之间的大气层。其误差成因是气体分子密度和空气湿度的变化。密度随着高度的增加而下降。密度或湿度的增加减缓了卫星信号的速度。</li>
    </ul>
  </li>
  <li>多径效应
    <ul>
      <li>GPS信号会被建筑物、丛林、山峰等反射，在到达接收机之前形成回波。信号会因干涉而失真。多径效应可通过选择测量位置(避免反射)、测量时间和使用好天线等方法获得一定程度的补偿。</li>
    </ul>
  </li>
</ul>

<p><a name="img62"><img src="/img/itp/62.jpg" alt=""></a>
<em>图：发射对测量时间的影响</em></p>

<ul>
  <li>接收机影响
    <ul>
      <li>还有一些误差是由于GPS接收机测量噪声和接收机内的时间延迟造成的，可使用更先进的技术来削弱这一影响。</li>
    </ul>
  </li>
  <li>DOP的影响</li>
</ul>

<h3 id="减小误差的方法">减小误差的方法<a class="anchorjs-link " href="#减小误差的方法" aria-label="Anchor link for: 减小误差的方法" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p><strong>通过双频测量补偿电离层影响</strong></p>

<p>电离层对测量误差的影响最大。如果发射的无线电信号穿越电离层，低频信号受减缓影响更为严重。通过使用两种不同的信号频率，可以在很大程度上补偿电离层的影响。GPS有L1和L5两个频率发送民用信号，所以可以会采用这一补偿原理。具体原理不做详细介绍，读者可以参考[<a href="#r_39">39</a><a name="rb_39"></a>]。根据[<a href="#r_40">40</a><a name="rb_40"></a>]，双频GPS能到3-5米的定位精度。</p>

<p><strong>地理修正模型</strong></p>

<p>该模型主要用来补偿电离层和对流层的影响。修正因子仅在应用于特定或有限区域时才有效。下面我们重点介绍一下D-GPS，因为这些技术可以让定位精度达到1-3厘米。</p>

<h3 id="d-gps">D-GPS<a class="anchorjs-link " href="#d-gps" aria-label="Anchor link for: d gps" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h3>

<p>D-GPS是差分GPS(Differential GPS)的缩写[<a href="#r_41">41</a><a name="rb_41"></a>]。我们将一台GPS接收机安置在基准站上进行观测。基准站已知精密坐标，计算出基准站到卫星的距离改正数，并由基准站实时将这一数据发送出去。用户接收机在进行GPS观测的同时，也接收到基准站发出的改正数，并对其定位结果进行改正，从而提高定位精度。差分GPS分为两大类：伪距差分和载波相位差分。</p>

<ul>
  <li>伪距差分原理</li>
</ul>

<p>这是应用最广的一种差分。在基准站上，观测所有卫星，根据基准站已知坐标和各卫星的坐标，求出每颗卫星每一时刻到基准站的真实距离。再与测得的伪距比较，得出伪距改正数，将其传输至用户接收机，提高定位精度。这种差分，能得到米级定位精度。</p>

<ul>
  <li>载波相位差分原理</li>
</ul>

<p>载波相位差分技术又称RTK(Real Time Kinematic)技术，是实时处理两个测站载波相位观测量的差分方法。即是将基准站采集的载波相位发给用户接收机，进行求差解算坐标。载波相位差分可使定位精度达到厘米级。大量应用于动态需要高精度位置的领域。</p>

<p>具体的计算原理这里不做介绍，感兴趣的读者可以参考[<a href="#r_42">42</a><a name="rb_42"></a>]。</p>

<h2 id="a-gps">A-GPS<a class="anchorjs-link " href="#a-gps" aria-label="Anchor link for: a gps" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>

<p>最后我们简单的介绍一下A-GPS，了解一下加快GPS接收器启动速度的方法。</p>

<p>市场上结合了移动无线功能和卫星导航功能(如GPS)的设备数量在不断增加。这种组合通常用于基于位置的服务(LBS)。可以说这些设备并非总处于工作状态，尤其是定位通过GPS完成时更是如此，原因在于GPS接收机的功耗限制了电池工作时间。</p>

<p>由于GPS设备很少工作，它有可能没有关于卫星位置的信息。在停用2h或更长的时间后，为能开始工作它必须首先下载卫星的轨道数据。GPS接收机获取轨道数据并计算出首次位置一般至少需要18～36s的时间(该时间称为首次定位时间：TTFF)。在不利的接收条件下(例如，城区高层建筑妨碍了对天空的直视时)，可能需要数分钟才能完成首次位置的计算。启动慢是GPS固有的限制，无法通过改进接收机技术来克服。</p>

<p>当缺少轨道数据时，GPS接收机必须执行一次完整的搜索过程，以便找到可用的卫星、下载数据和计算位置。在编码－频率域内对大约30颗GPS卫星进行搜索非常耗时，编码－频率域每级的积分时间通常至少需要1ms(1个C/A码周期)。如果将频率范围按50Hz的步长划分(即频率间隔为2×6000/50Hz＝240Hz)，则需要对多达1023×50＝51150个位置(bins)进行搜索(需要51s)。</p>

<p>在信号较弱时可通过提供额外的卫星轨道数据和其他GPS信息来快速定位和测量。这些信息可通过其他信道获得，例如通过GSM、GPRS、CDMA或UMTS。这一应用称作辅助服务，并用于辅助GPS(A-GPS或AGPS)。A-GPS是一种使用辅助数据来加速定位的功能或服务。GPS接收机通过移动通信网络或直接经互联网获得辅助数据。辅助数据中包含以下信息：</p>

<ul>
  <li>卫星星座(星历)；</li>
  <li>精确轨道数据(星历、轨道)；</li>
  <li>时间信息；</li>
  <li>GPS接收机的多普勒频率和频移(误差)。</li>
</ul>

<p>通过使用这些辅助数据，即便在不利的信号条件下GPS接收机也能够迅速定位。在弱信号条件下，这通常是获取定位的唯一途径。取决于辅助数据的复杂性和完整性，启动时间可能会显著缩短。剩余的启动时间取决于GPS信号的强度。通常辅助信息的可用性和精度越高，启动时间就越短。</p>

<p><a name="img65"><img src="/img/itp/65.jpg" alt=""></a>
<em>图：各种辅助数据时近似的启动时间</em></p>

<p>集成了GPS设备的移动台仍需至少能看到4颗卫星。使用A-GPS时，GPS接收机需要一个用于接收辅助数据的接口。通过减少轨道数据的接收时间从而最大程度节省了启动时间。因为我们的手机通常会同时有无线网络和GPS，因此它的启动速度比纯GPS设备快[<a href="#r_43">43</a><a name="rb_43"></a>]。</p>

<h2 id="参考文献">参考文献<a class="anchorjs-link " href="#参考文献" aria-label="Anchor link for: 参考文献" data-anchorjs-icon="#" style="opacity: 1; padding-left: 0.375em;"></a></h2>
<ol>
  <li>
    <p><a name="r_1"></a> <a href="https://www.springer.com/gp/book/9783319947846">Connected Vehicles: Intelligent Transportation Systems. Springer International Publishing. 2019</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_1">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_2"></a> <a href="https://www.amazon.com/Navigation-Satellite-Systems-Inertial-Integration/dp/111844700X">Global Navigation Satellite Systems, Inertial Navigation, and Integration 3rd Edition. Wiley-Interscience. 2013.</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_2">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_3"></a> <a href="https://www.amazon.com/Understanding-GPS-Principles-Applications-Second/dp/1580538940">Understanding GPS: Principles and Applications, Second Edition 2nd Edition. Artech House. 2005.</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_3">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_4"></a> GPS卫星导航基础. 航空工业出版社. 2011&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_4">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_5"></a> <a href="https://zh.wikipedia.org/wiki/GPS%E5%8D%AB%E6%98%9F">GPS卫星</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_5">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_6"></a> <a href="https://gisgeography.com/trilateration-triangulation-gps/">Trilateration vs Triangulation – How GPS Receivers Work</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_6">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_7"></a> <a href="https://zhuanlan.zhihu.com/p/32638633">无人驾驶技术入门(三)| 百度无人车传感器 GPS 深入剖析</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_7">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_8"></a> <a href="https://www.cnblogs.com/AI-Algorithms/p/3724987.html">陆上物探测量基本理论之一—高程</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_8">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_9"></a> <a href="https://baike.baidu.com/item/%E6%B5%B7%E6%8B%94/5754">百科词条：海拔</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_9">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_10"></a> <a href="https://htallone.com/2018/09/24/homogeneousellipsoidwgs-84/">均质旋转椭球模型与WGS 84</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_10">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_11"></a> <a href="https://baike.baidu.com/item/1980%E8%A5%BF%E5%AE%89%E5%9D%90%E6%A0%87%E7%B3%BB">1980西安坐标系</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_11">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_12"></a> <a href="https://baike.baidu.com/item/2000%E5%9B%BD%E5%AE%B6%E5%A4%A7%E5%9C%B0%E5%9D%90%E6%A0%87%E7%B3%BB/7262512">2000国家大地坐标系</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_12">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_13"></a> <a href="https://baijiahao.baidu.com/s?id=1602318906816204687&amp;wfr=spider&amp;for=pc">7月1日起，自然资源系统一律采用2000国家大地坐标系</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_13">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_14"></a> <a href="https://baike.baidu.com/item/GCJ-02/1913612">GCJ-02</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_14">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_15"></a> <a href="https://www.zhihu.com/question/29806566">如何看待「地形图非线性保密处理技术」？</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_15">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_16"></a> <a href="https://github.com/googollee/eviltransform">Transform coordinate between earth(WGS-84) and mars in china(GCJ-02)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_16">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_17"></a> <a href="https://lbsyun.baidu.com/index.php?title=coordinate">百度地图使用什么坐标体系？</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_17">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_18"></a> <a href="https://zhuanlan.zhihu.com/p/79027966">从地球到火星　～ 论 GCJ-02 及其衍生</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_18">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_19"></a> <a href="https://zhuanlan.zhihu.com/p/33295151">一个小游戏让你彻底弄懂墨卡托投影</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_19">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_20"></a> <a href="https://zhuanlan.zhihu.com/p/98951492">什么是墨卡托坐标系</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_20">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_21"></a> <a href="https://en.wikipedia.org/wiki/Rhumb_line">Wiki: Rhumb Line</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_21">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_22"></a> <a href="https://baike.baidu.com/item/%E7%AD%89%E8%A7%92%E8%88%AA%E7%BA%BF">等角航线</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_22">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_23"></a> <a href="https://baike.baidu.com/item/%E5%A4%A7%E5%9C%86%E8%88%AA%E7%BA%BF">大圆航线</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_23">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_24"></a> <a href="https://en.wikipedia.org/wiki/Great-circle_navigation">Great-circle navigation</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_24">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_25"></a> <a href="https://baike.baidu.com/item/%E9%AB%98%E6%96%AF-%E5%85%8B%E5%90%95%E6%A0%BC%E6%8A%95%E5%BD%B1">高斯-克吕格投影</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_25">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_26"></a> <a href="http://tian0226.blog.sohu.com/142843049.html">墨卡托投影、高斯-克吕格投影、UTM投影及我国分带方法</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_26">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_27"></a> <a href="https://en.wikipedia.org/wiki/Transverse_Mercator_projection">Transverse Mercator projection</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_27">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_28"></a> <a href="https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system">Universal Transverse Mercator coordinate system</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_28">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_29"></a> <a href="https://baike.baidu.com/item/%E5%85%B0%E5%8B%83%E7%89%B9%E6%8A%95%E5%BD%B1">兰勃特投影</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_29">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_30"></a> <a href="http://support.supermap.com.cn/datawarehouse/webdochelp/idesktop/features/dataprocessing/projection/projectionused.htm">常用的地图投影</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_30">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_31"></a> <a href="http://mason.gmu.edu/~treid5/Math447/GPSEquations/">Solving the GPS Equations</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_31">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_32"></a> <a href="http://www.telesens.co/2017/07/17/calculating-position-from-raw-gps-data/">Calculating Position from Raw GPS Data</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_32">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_33"></a> <a href="https://zhuanlan.zhihu.com/p/108771993">GPS单点定位笔记1 (最小二乘法)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_33">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_34"></a> <a href="https://github.com/ansonn/docs/blob/master/GPS%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E5%9F%B9%E8%AE%AD%E4%BA%A4%E6%B5%81/GPS%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8E%A5%E6%94%B6%E6%9C%BA%E8%AE%BE%E8%AE%A1%20%20%E8%B0%A2%E9%92%A2%20%E8%91%97.pdf">GPS原理与接收机设计</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_34">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_35"></a> <a href="https://github.com/ansonn/docs/blob/master/GPS%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E5%9F%B9%E8%AE%AD%E4%BA%A4%E6%B5%81/GPS%E8%BD%AF%E4%BB%B6%E6%8E%A5%E6%94%B6%E6%9C%BA%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%AE%9A%E4%BD%8D%E7%AE%97%E6%B3%95%E7%A0%94%E7%A9%B6.pdf">GPS软件接收机的实现与定位算法研究</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_35">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_36"></a> <a href="https://item.jd.com/12282475.html">深入浅出通信原理</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_36">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_37"></a> <a href="https://item.jd.com/10845955.html">大话移动通信</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_37">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_38"></a> <a href="https://zhuanlan.zhihu.com/p/111325516">GPS定位笔记4 (轨道理论和星历和历书)</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_38">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_39"></a> <a href="https://res.mdpi.com/d_attachment/sensors/sensors-19-02593/article_deploy/sensors-19-02593.pdf">Precise Point Positioning Using World’s First Dual-Frequency GPS/GALILEO Smartphone</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_39">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_40"></a> <a href="https://www.zhihu.com/question/279330391">双频GPS到底能实现多高精度的定位？</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_40">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_41"></a> <a href="https://en.wikipedia.org/wiki/Differential_GPS">Differential GPS</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_41">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_42"></a> <a href="https://blog.csdn.net/bit_kaki/article/details/81185384">GNSS原理及技术(三)——差分定位技术</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_42">[返回]</a></p>
  </li>
  <li>
    <p><a name="r_43"></a> <a href="https://qastack.cn/electronics/322596/why-does-smartphone-gps-find-its-position-much-faster-than-a-gps-module">为什么智能手机GPS定位比GPS模块快得多？</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rb_43">[返回]</a></p>
  </li>
</ol>



                <hr>

                


                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2019/03/14/philosophy/" data-toggle="tooltip" data-placement="top" title="" data-original-title="人工智能能否实现？">← Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2020/04/07/traffic-finance/" data-toggle="tooltip" data-placement="top" title="" data-original-title="美国交通财政政策">Next Post →</a>
                    </li>
                    
                </ul>


                

                
                <!-- disqus 评论框 start -->

		<div class="show-comments" style="text-align:center;margin-top:30px;font-size:1.5em">
		    <ul class="pager">
                      <li>
		        <a href="" id="show-comments-button" onclick="disqus();return false;">显示Disqus评论(需要科学上网)</a>
                      </li>
                    </ul>
		</div>

   
                <div id="disqus_thread" class="disqus-thread"></div>
           
                <!-- disqus 评论框 end -->
                

            </div>

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5 id="featured-tags"><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
        				
                            
                				<a href="/tags/#人工智能" title="人工智能" rel="7">
                                    人工智能
                                </a>
                            
        				
                            
                				<a href="/tags/#深度学习" title="深度学习" rel="17">
                                    深度学习
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#Java" title="Java" rel="6">
                                    Java
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#BERT" title="BERT" rel="5">
                                    BERT
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#编程" title="编程" rel="3">
                                    编程
                                </a>
                            
        				
                            
        				
                            
                				<a href="/tags/#OCR" title="OCR" rel="2">
                                    OCR
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#语音识别" title="语音识别" rel="4">
                                    语音识别
                                </a>
                            
        				
                            
                				<a href="/tags/#Kaldi" title="Kaldi" rel="2">
                                    Kaldi
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#Linux" title="Linux" rel="2">
                                    Linux
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#XLNet" title="XLNet" rel="5">
                                    XLNet
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#情感分析" title="情感分析" rel="3">
                                    情感分析
                                </a>
                            
        				
                            
                				<a href="/tags/#sentiment analysis" title="sentiment analysis" rel="2">
                                    sentiment analysis
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
        			</div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5 id="friends">FRIENDS</h5>
                <ul class="list-inline">
                    
                        <li><a href="http://fancyerii.github.io">Li Li</a></li>
                    
                </ul>
                
            </div>
        </div>
````



